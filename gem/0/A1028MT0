ä½œè€…: itoc (League) ç«™å…§: plan
æ¨™é¡Œ: [åŠŸèƒ½] ä¾ä¸Šç«™çš„ port çš„ç§€å‡ºä¸åŒçš„ç•«é¢
æ™‚é–“: 2004/02/07 Sat 11:19:46                           Updated: 2004/02/07

> â€» å¼•è¿°ã€Štandrian.bbs@ntcb.twbbs.org.tw (å¹»åŸŸé­”åŸŽå¾Œç¥–)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æŠŠ bbsd.c çš„æ‰€æœ‰æœ‰é—œ mport çš„éƒ¨åˆ†æ‰“é–‹å³å¯~~ ^^
> mport åˆ¤æ–·ä½¿ç”¨è€…å¾žå“ªå€‹portä¸Šä¾†

: bbsd.c

- /* static int mport; */ /* Thor.990325: ä¸éœ€è¦äº†:P */
+ static int mport = 0;       /* ä¸Šç«™çš„ port */
static u_long tn_addr;

: bbsd.c:start_daemon()

#if 1
    n = sizeof(sin);
    if (getsockname(0, (struct sockaddr *) &sin, &n) >= 0)
      port = ntohs(sin.sin_port);
#endif
-   /* mport = port; */ /* Thor.990325: ä¸éœ€è¦äº†:P */
+   mport = port;

  ...
  ...

- /* mport = port; */ /* Thor.990325: ä¸éœ€è¦äº†:P */
+ mport = port;
  sin.sin_port = htons(port);

> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <

  æŽ¥ä¸‹ä¾† mport å°±æ˜¯ä½¿ç”¨è€…å¾žå“ªå€‹ port ä¸Šä¾†
  å¯ä»¥è‡ªç”±ç™¼æ®

: bbsd.c:tn_main()

- prints(MYHOSTNAME " âŠ™ " SCHOOLNAME " âŠ™ " MYIPADDR "\n"
-   "æ­¡è¿Žå…‰è‡¨ã€\033[1;33;46m %s \033[mã€‘ç›®å‰ç·šä¸Šäººæ•¸ [%d] äºº",
-   str_site, ushm->count);
+ prints(MYHOSTNAME " âŠ™ " SCHOOLNAME " âŠ™ " MYIPADDR "[port:%d]\n"
+   "æ­¡è¿Žå…‰è‡¨ã€\033[1;33;46m %s \033[mã€‘ç›®å‰ç·šä¸Šäººæ•¸ [%d] äºº",
+   mport, str_site, ushm->count);

--
[1;37mâ–¡ æœ¬æ–‡ç« ç”± [33mitoc[37m å¾ž [32mitoc.Dorm11.NCTU.edu.tw[37m ç™¼è¡¨[m
