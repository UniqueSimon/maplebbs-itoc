ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (:MM:) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ] å¦‚ä½•åœ¨ç™¼æ–‡æ™‚ï¼Œé˜²æ­¢ç”¨è¤‡è£½è²¼ä¸Šè³ºéŒ¢
ç™¼ä¿¡ç«™: XEON (Thu, 15 May 2003 21:02:49 +0800 (CST))      Updated: 2004/04/10

â€» å¼•è¿°ã€Šqazq (ä¸€å¹³æµ·å²¸ç·š)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æœ‰æ²’æœ‰ä»€éº¼æ–¹æ³•å¯ä»¥ä¸€å€‹å­—ä¸€å€‹å­—åˆ¤æ–·å‘¢ï¼Ÿ

â€» æ³•ä¸€ é™½æ˜¥å‹

: post.c:do_post()

    else
    {
+     if (wordsnum > spendtime * 3)
+     {
        mode = BMIN(wordsnum, spendtime) / 10;    /* æ¯åå­—/ç§’ ä¸€å…ƒ */
        prints("é€™æ˜¯æ‚¨çš„ç¬¬ %d ç¯‡æ–‡ç« ï¼Œå¾— %d éŠ€ã€‚", ++cuser.numposts, mode);
        cuser.money += mode;
+     }
+     else
+       prints("è«‹ä¸è¦ä½¿ç”¨ copy-paste çš„æ–¹æ³•ä¾†é¨™ç¨¿è²»");
    }

â€» æ³•äºŒ æš´åŠ›å‹

  é€™æ–¹æ³•å°æ–°æ³¨éŸ³è¼¸å…¥æ³•é‚£ç¨®æ‰“å¾ˆå¤šå†ä¸€æ¬¡è¼¸å…¥çš„
  ä¹Ÿæœƒåˆ¤æ–·ç‚º copy-paste :p

: edit.c:vedit()

+ int copypaste;    /* 1: ç”¨ copy-paste çš„ */

int             /* -1:å–æ¶ˆç·¨è¼¯ 0:å®Œæˆç·¨è¼¯ */
vedit(fpath, ve_op)
  char *fpath;
  int ve_op;
{
  textline *vln, *tmp;
  int cc, col, mode, margin, pos;
+ time_t now, lastype;
+ int typing;

+ typing = 0;
+ copypaste = 0;
+ time(&lastype);

  /* --------------------------------------------------- */
  /* åˆå§‹è¨­å®šï¼šè¼‰å…¥æª”æ¡ˆã€å¼•ç”¨æ–‡ç« ã€è¨­å®šç·¨è¼¯æ¨¡å¼          */
  /* --------------------------------------------------- */

  ...
  ...

    cc = vkey();

    if (isprint2(cc))
    {
+     if (!copypaste)         /* copy paste æª¢æŸ¥ */
+     {
+       typing++;
+       if (typing == 5)      /* ä¸€ç§’æœ€å¤šè¼¸å…¥ 5 å€‹å­— */
+       {
+         typing = 0;
+         time(&now);
+         if (now == lastype)
+           copypaste = 1;
+         lastype = now;
+       }
+     }

      ve_char(cc);
    }

: post.c:do_post

    else
    {
+     extern int copypaste;
+     if (!copypaste)
+     {
        mode = BMIN(wordsnum, spendtime) / 10;    /* æ¯åå­—/åˆ† ä¸€å…ƒ */
        prints("é€™æ˜¯æ‚¨çš„ç¬¬ %d ç¯‡æ–‡ç« ï¼Œå¾— %d éŠ€ã€‚", ++cuser.numposts, mode);
        cuser.money += mode;
        /* itoc.010408: ä¾æ–‡ç« é•·åº¦/æ‰€è²»æ™‚é–“ä¾†æ±ºå®šè¦çµ¦å¤šå°‘éŒ¢ */
        /* itoc.è¨»è§£: éŒ¢è¦é›£è³ºï¼Œå¹£åˆ¶æ‰æœƒæœ‰æ„ç¾© */
+     }
+     else
+       prints("è«‹ä¸è¦ä½¿ç”¨ copy-paste çš„æ–¹æ³•ä¾†é¨™ç¨¿è²»");
    }

--
    [1;32mâ•­â”€ Origin â”€â•— [0;36m?[1m?[0;36m?[1mO[0;36m?[1m?[0;36m?[1m?[1;31m processor.tfcis.org [32m ï½ ÎºÎ»Î¼ â”€â”¤[m
    [1;32mâ”œ   Author   â•¡ [33;44mitoc.Dorm-GD2.NCTU.edu.tw                [m
