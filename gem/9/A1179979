ä½œè€…: itoc (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: itoc
æ¨™é¡Œ: Re: æƒ³è«‹æ•™å¤§å¤§é—œæ–¼éŠæˆ²çš„å•é¡Œ
æ™‚é–“: 2005/05/01 Sun 17:43:41                           Updated: 2005/05/01

â€» å¼•è¿°ã€ŠPon (ç¢°ï½)ã€‹ä¹‹éŠ˜è¨€ï¼š
>     å°äº†ï½æƒ³è«‹å•ä¸€ä¸‹å¤§å¤§æœ‰è¾¦æ³•ç´€éŒ„ä½¿ç”¨è€…ç©éŠæˆ²çš„ log å— @@?
>     å› ç‚ºæœ‰ç™¼ç¾ç«™ä¸Šä¸€äº›é‡‘å¹£ç‰¹åˆ¥å¤šçš„ï¼Œä¼¼ä¹éƒ½æ˜¯åˆ©ç”¨è»Ÿé«”æ›ç«™æ´—éŒ¢
>     è¸¢ä¸‹å»éå¹¾ç§’åˆè‡ªå‹•é€£ä¸Šä¾†äº† \___/
>     ä½†æ˜¯å»æ²’æœ‰æ ¹æ“šèƒ½å¤ æ²»ä»–å€‘ï¼Œ
>     æ‰€ä»¥æƒ³è«‹å•ä¸€ä¸‹å¤§å¤§æœ‰æ²’æœ‰å¯«éé€™æ¨£çš„ç¨‹å¼ @@?

  æœ€ç°¡å–®çš„å¯«æ³•ï¼Œä¸å»ç®¡éŠæˆ²çš„ç¨®é¡

: acct.c:addmoney()

void
addmoney(addend)
  int addend;
{
  if (addend < (INT_MAX - cuser.money)) /* é¿å…æº¢ä½ */
    cuser.money += addend;
  else
    cuser.money = INT_MAX;
+ if (bbsmode == M_GAME)
+ {
+   char buf[256];
+   sprintf("[%s] %s ç©éŠæˆ²è³ºäº† %d éŠ€\n", Now(), cuser.userid, addend);
+   f_cat("run/gamelog", buf);
+ }
}

: account.c:main()

    sprintf(title, "%sæ–‡ç« ç¯‡æ•¸çµ±è¨ˆ", date);
    keeplog(FN_RUN_POST_LOG, BN_SECURITY, title, 2);

+   sprintf(title, "%séŠæˆ²è³ºéŒ¢è¨˜éŒ„", date);
+   keeplog("run/gamelog", BN_SECURITY, title, 2);

--
  å¦‚æœæƒ³çŸ¥é“åœ¨å“ªå€‹éŠæˆ²è³ºéŒ¢çš„ï¼Œå°±å¾—åœ¨ addmoney() åŠ ä¸€å€‹åƒæ•¸
  ç„¶å¾Œæ”¹ *.c çš„ addmoney(xx); è®Šæˆ addmoney(xx, "ç¨®é¡");

--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
