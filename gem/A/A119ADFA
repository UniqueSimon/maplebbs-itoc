ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: è«‹å• å¦‚ä½•å–æ¶ˆç‰ˆä¸»å¯ä»¥æ›´æ”¹çœ‹æ¿å±¬æ€§
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2005/05/26 Thu 09:46:30)                Updated: 2005/05/26

â€» å¼•è¿°ã€Špapago (papago)ã€‹ä¹‹éŠ˜è¨€ï¼š
>     è«‹å•.é™¤äº†ä»¥ä¸Š ä¸é–‹æ”¾ç‰ˆä¸»ä¿®æ”¹çœ‹æ¿å±¬æ€§ çš„åŠŸèƒ½å¤–
>     èƒ½å¦è¨­å®š ç‰¹å®šå„ªç§€ç‰ˆä¸» èƒ½ä¿®æ”¹å‘¢ ?

: global.h

#define FN_ETC_EXPIRE   "etc/expire.conf"       /* çœ‹æ¿æ–‡ç« ç¯‡æ•¸ä¸Šé™è¨­å®š */
+ #define FN_ETC_GOODBM "etc/goodbm"            /* å„ªè‰¯æ¿ä¸»æ¸…å–® */

: admutil.c:a_xfile()

    "æ”¶ä¿¡é»‘åå–®",
+   "å„ªè‰¯æ¿ä¸»æ¸…å–®",

  ...
  ...

    UNMAIL_ACLFILE,
+   FN_ETC_GOODBM,

: manage.c:belong_goodbm() åŠ åœ¨ post_manage() å‰é¢

static int
belong_goodbm()
{
  int fd, rc;
  char *str;

  rc = 0;
  if ((fd = open(FN_ETC_GOODBM, O_RDONLY)) >= 0)
  {
    mgets(-1);

    while (str = mgets(fd))
    {
      if (!strcmp(str, cuser.userid))
      {
        rc = 1;
        break;
      }
    }

    close(fd);
  }
  return rc;
}

: post.c:post_manage()

  [1;44m// æ¥ä¸‹ä¾†å°±çœ‹ä½ è¦ç¦æ­¢ã€Œä¸åœ¨å„ªè‰¯æ¿ä¸»åå–®ä¸Šçš„æ¿ä¸»ã€åšå“ªäº›äº‹ï¼Œ     [m
  [1;44m// å°±åœ¨é‚£ case è£¡é¢åŠ  if (belong_goodbm())                      [m
  [1;44m// ä¾‹å¦‚ã€Œåªæœ‰åœ¨å„ªè‰¯æ¿ä¸»åå–®ä¸Šçš„æ¿ä¸»æ‰èƒ½æ”¹è®Šæ˜¯å¦é–‹æ”¾æ³¨éŸ³æ–‡ã€     [m

  case 's':
+   if (belong_goodbm())
      return post_battr_noscore(xo);

--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
