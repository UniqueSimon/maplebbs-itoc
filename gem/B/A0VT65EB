ä½œè€…: itoc (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: itoc
æ¨™é¡Œ: Re: ç´€éŒ„--è§€çœ‹è©²çœ‹æ¿--çš„æ—¥æœŸå’ŒID
æ™‚é–“: Sun Dec  7 19:53:38 2003                          Updated: 2005/07/09

â€» å¼•è¿°ã€Šhessionhsiao.bbs@bala.mis.ccu.edu.tw (æ…¶ç¥ å¹³éœçš„æ—¥å­)ã€‹ä¹‹éŠ˜è¨€ï¼š
> å°±æ˜¯ç‰ˆä¸»ä»¥ä¸Šçš„æ¬Šé™çš„äºº
> å¯ä»¥è§€çœ‹
> é€²å‡ºè©²çœ‹ç‰ˆçš„ idå’Œæ—¥æœŸç­‰ç´€éŒ„

: board.c:brd_usies() æ–°å¢æ­¤å‡½å¼åœ¨ XoPost() å‰é¢

static void
brd_usies()
{
  char fpath[64], buf[256];

  brd_fpath(fpath, currboard, "usies");
  sprintf(buf, "%s %s\n", Now(), cuser.userid);
  f_cat(fpath, buf);
}

: board.c:XoPost()

  brh_get(brd->bstamp, bno);

+ if (!(brd->battr & BRD_ANONYMOUS))
+   brd_usies();

  return 0;
}

: manage.c:post_usies() æ–°å¢å‡½å¼æ–¼ post_manage() å‰é¢

static int
post_usies(xo)
  XO *xo;
{
  char fpath[64];

  brd_fpath(fpath, currboard, "usies");
  if (more(fpath, (char *) -1) >= 0 &&
    vans("è«‹å•æ˜¯å¦åˆªé™¤é€™äº›çœ‹æ¿é–±è®€è¨˜éŒ„(Y/N)ï¼Ÿ[N] ") == 'y')
    unlink(fpath);

  return XO_HEAD;
}

: manage.c:post_manage()

    "Manager å¢æ¸›å‰¯æ¿ä¸»",
+   "Usies   è§€å¯Ÿçœ‹æ¿é–±è®€è¨˜éŒ„",

  ...
  ...

- char *menu = "â— æ¿ä¸»é¸å–® (B)ä¸»é¡Œ (W)é€²æ¿ (M)å‰¯æ¿"
+ char *menu = "â— æ¿ä¸»é¸å–® (B)ä¸»é¡Œ (W)é€²æ¿ (M)å‰¯æ¿ (U)è¨˜éŒ„"

  ...
  ...

  case 'm':
    return post_changeBM(xo);

+ case 'u':
+   return post_usies(xo);

: expire.c:main()

  do
  {
    bname = brdp->brdname;
    if (!*bname)
      continue;

+   {
+     struct tm *ptime;
+     time_t now;

+     time(&now);
+     ptime = localtime(&now);

+     if (ptime->tm_wday == 0)      /* æ¯é€±ä¸€ç  usies */
+     {
+       sprintf(buf, "%s/%s", bname, "usies");
+       unlink(buf);
+     }
+   }

--
 [1;43mâ”Œ[44mâ”¼[m Or[1mig[30min[m: [44m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [31;47m processor.tfcis.org [m
 [1;41mâ””[42mâ”˜[m A[1mut[30mho[mr: [1;36mitoc [30må¾ [35m140.113.191.153 [30mç™¼è¡¨[m
