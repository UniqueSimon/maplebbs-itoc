ç™¼ä¿¡äºº: qazq.bbs@bbs.cs.nchu.edu.tw (ï¼­ï½ï½ï½Œï½…ï¼ï½‰ï½”ï½ï½ƒ) çœ‹æ¿: plan
æ¨™  é¡Œ: [åŠŸèƒ½] å…¨ç«™å–œå¥½è¨­å®šçµ±è¨ˆã€‚
ç™¼ä¿¡ç«™: ä¸­èˆˆè³‡ç§‘ (2004/01/08 Thu 23:16:29)                Updated: 2004/01/08

    ç”±æ–¼æœ¬ç«™æœ‰å¾ˆå¤šæ–°å¢çš„ç¨‹å¼éƒ½æ”¾åœ¨å–œå¥½è¨­å®šçµ¦ä½¿ç”¨è€…è¨­å®šã€‚

    æ‰€ä»¥æƒ³è¦è§€å¯Ÿä¸€ä¸‹å“ªå€‹åŠŸèƒ½ä½¿ç”¨ç‡å¦‚ä½•ï¼Œæ‰€ä»¥å¯«äº†é€™å€‹å°ç¨‹å¼ã€‚

    è¨ˆç®—çµæœæœƒè¼¸å‡ºåˆ° ~/gem/@-habit  å¯ä»¥å¾ï¼¢ï¼¢ï¼³ä¸Šé¢ç›´æ¥è§€çœ‹ã€‚

    ä¸‹é¢é™„ä¸Šç¨‹å¼ç¢¼ï¼Œä»¥åŠè¼¸å‡ºçš„ç•«é¢ã€‚

    ç•¶ç„¶ï¼Œç•«é¢å¯ä»¥è‡ªå·±ä¿®æ”¹ï¼†ä¸Šè‰²ã€‚

==============================================================================

: src/util/Makefile

EXE =   ... [1;33mshowHabit[m

: src/util/showHabit.c   æ–°å¢ä¸‹é¢æ•´æ”¯ç¨‹å¼

/*-------------------------------------------------------*/
/* util/showHabit.c  ( NTHU CS MapleBBS Ver 3.00 )       */
/*-------------------------------------------------------*/
/* target : è§€å¯Ÿå…¨ç«™å–œå¥½è¨­å®šä½¿ç”¨æƒ…æ³                     */
/* create : 04/01/08                                     */
/* update :   /  /                                       */
/* author : qazq.bbs@bbs.cs.nchu.edu.tw                  */
/*-------------------------------------------------------*/

#define _ADMIN_C_

#include "bbs.h"

#define OUTFILE_HABIT   BBSHOME"/gem/@/@-habit"

static int habit[32] = {0};

static void
count_habit(flag)
  unsigned flag;
{
  int i;
  unsigned mask = 1 << 31;

  for (i = 31; i >= 0; i--)
  {
    if (flag & mask)
      habit[i]++;

    flag <<= 1;
  }
}


int
main()
{
  int i, totaluser = 0;
  char c, buf[30];
  FILE *fp;

  for (c = 'a'; c <= 'z'; c++)
  {
    char buf[64];
    struct dirent *de;
    DIR *dirp;

    sprintf(buf, BBSHOME "/usr/%c", c);
    chdir(buf);

    if (!(dirp = opendir(".")))
      continue;

    while (de = readdir(dirp))
    {
      ACCT acct;
      int fd;
      char *fname;

      fname = de->d_name;
      if (*fname <= ' ' || *fname == '.')
        continue;

      sprintf(buf, "%s/.ACCT", fname);
      if ((fd = open(buf, O_RDONLY)) < 0)
        continue;

      read(fd, &acct, sizeof(ACCT));
      close(fd);

      count_habit(acct.ufo);
      totaluser++;
    }

    closedir(dirp);
  }

  if (!(fp = fopen(OUTFILE_HABIT, "w")))
    return;

  fprintf(fp, "å…¨ç«™äººæ•¸ï¼š%d\n\n", totaluser);

  for (i = 0; i <= 31; i++)
  {
    sprintf(buf, "%s", ufo_tbl[i]);
    if (!strcmp(buf, "ä¿ç•™") || !ufo_tbl[i])
      continue;

    fprintf(fp, "Habit[%2d]  %s  é–‹å•Ÿäººæ•¸ï¼š%-3d  é—œé–‰äººæ•¸ï¼š%d\n",
      i, ufo_tbl[i], habit[i], totaluser - habit[i]);
  }

  return 0;
}

==============================================================================

å…¨ç«™äººæ•¸ï¼š425

Habit[ 1]  å‹•æ…‹çœ‹æ¿        (é–‹å•Ÿ/é—œé–‰)  é–‹å•Ÿäººæ•¸ï¼š412  é—œé–‰äººæ•¸ï¼š13
Habit[ 2]  çœ‹æ¿åˆ—è¡¨é¡¯ç¤º    (æ–‡ç« /ç·¨è™Ÿ)  é–‹å•Ÿäººæ•¸ï¼š51   é—œé–‰äººæ•¸ï¼š374
Habit[ 3]  çœ‹æ¿åˆ—è¡¨æ’åº    (å­—æ¯/åˆ†é¡)  é–‹å•Ÿäººæ•¸ï¼š149  é—œé–‰äººæ•¸ï¼š276
Habit[ 4]  é€²æ¿ç•«é¢        (é¡¯ç¤º/è·³é)  é–‹å•Ÿäººæ•¸ï¼š411  é—œé–‰äººæ•¸ï¼š14
Habit[ 5]  æ–‡ç« ç·¨è¼¯å™¨      (ç°¡åŒ–/å®Œæ•´)  é–‹å•Ÿäººæ•¸ï¼š9    é—œé–‰äººæ•¸ï¼š416
Habit[ 6]  é€²/é›¢ç«™ç•«é¢     (ç°¡åŒ–/å®Œæ•´)  é–‹å•Ÿäººæ•¸ï¼š100  é—œé–‰äººæ•¸ï¼š325
Habit[ 7]  å‘¼å«å™¨          (å¥½å‹/æ‰€æœ‰)  é–‹å•Ÿäººæ•¸ï¼š16   é—œé–‰äººæ•¸ï¼š409
Habit[ 8]  å»£æ’­å¤©ç·š        (æ‹’æ”¶/æ¥æ”¶)  é–‹å•Ÿäººæ•¸ï¼š9    é—œé–‰äººæ•¸ï¼š416
Habit[ 9]  é é›¢å¡µå›‚        (å®‰éœ/æ¥æ”¶)  é–‹å•Ÿäººæ•¸ï¼š8    é—œé–‰äººæ•¸ï¼š417
Habit[10]  ä½¿ç”¨è€…åå–®é¡¯ç¤º  (å¥½å‹/å…¨éƒ¨)  é–‹å•Ÿäººæ•¸ï¼š17   é—œé–‰äººæ•¸ï¼š408
Habit[11]  æ¥å—ä¸Šç«™é€šçŸ¥    (é€šçŸ¥/å–æ¶ˆ)  é–‹å•Ÿäººæ•¸ï¼š35   é—œé–‰äººæ•¸ï¼š390
Habit[12]  ä¸Šç«™é€é€šçŸ¥/å”å°‹ (ä¸é€/é€šçŸ¥)  é–‹å•Ÿäººæ•¸ï¼š24   é—œé–‰äººæ•¸ï¼š401
Habit[13]  æ°´çƒå›é¡§ä»‹é¢    (å®Œæ•´/ä¸Šæ¬¡)  é–‹å•Ÿäººæ•¸ï¼š292  é—œé–‰äººæ•¸ï¼š133
Habit[14]  ä¸å„²å­˜æ°´çƒç´€éŒ„  (åˆªé™¤/é¸æ“‡)  é–‹å•Ÿäººæ•¸ï¼š123  é—œé–‰äººæ•¸ï¼š302
Habit[15]  ä¸å„²å­˜èŠå¤©ç´€éŒ„  (åˆªé™¤/é¸æ“‡)  é–‹å•Ÿäººæ•¸ï¼š17   é—œé–‰äººæ•¸ï¼š408
Habit[16]  ä¸ä½¿ç”¨ç°½åæª”    (ä¸ç”¨/é¸æ“‡)  é–‹å•Ÿäººæ•¸ï¼š359  é—œé–‰äººæ•¸ï¼š66
Habit[17]  é¡¯ç¤ºç°½åæª”      (é¡¯ç¤º/ä¸çœ‹)  é–‹å•Ÿäººæ•¸ï¼š45   é—œé–‰äººæ•¸ï¼š380
Habit[18]  ä¸Šç«™ç€è¦½æ–°è    (ç€è¦½/ä¸è¦)  é–‹å•Ÿäººæ•¸ï¼š1    é—œé–‰äººæ•¸ï¼š424
Habit[19]  æ•´è¡Œå…‰æ£’        (å…‰æ£’/æ™®é€š)  é–‹å•Ÿäººæ•¸ï¼š404  é—œé–‰äººæ•¸ï¼š21
Habit[20]  çœ‹æ¿èªªæ˜        (é¡¯ç¤º/éš±è—)  é–‹å•Ÿäººæ•¸ï¼š417  é—œé–‰äººæ•¸ï¼š8
Habit[21]  éš±èº«ä¸Šç«™        (éš±èº«/ç¾èº«)  é–‹å•Ÿäººæ•¸ï¼š1    é—œé–‰äººæ•¸ï¼š424
Habit[22]  è‡ªå‹•è·³åˆ°æœªè®€çœ‹æ¿(è‡ªå‹•/ä¸è·³)  é–‹å•Ÿäººæ•¸ï¼š382  é—œé–‰äººæ•¸ï¼š43
Habit[24]  å£äººéš±è—        (éš±è—/é¡¯ç¤º)  é–‹å•Ÿäººæ•¸ï¼š16   é—œé–‰äººæ•¸ï¼š409
Habit[27]  å‹•æ…‹éš±è—        (éš±è—/é¡¯ç¤º)  é–‹å•Ÿäººæ•¸ï¼š6    é—œé–‰äººæ•¸ï¼š419
Habit[28]  éš±èº«è¡“          (éš±èº«/ç¾èº«)  é–‹å•Ÿäººæ•¸ï¼š9    é—œé–‰äººæ•¸ï¼š416
Habit[30]  ç«™é•·ä¸Šç«™ä¾†æº    (é™åˆ¶/ä»»æ„)  é–‹å•Ÿäººæ•¸ï¼š0    é—œé–‰äººæ•¸ï¼š425

==============================================================================

--
 [1m[42mâ”Œ[41mâ”¼[m Au[1mth[30mor[m: [43m ä¸­èˆˆè³‡ç§‘Ë™ä¸­èˆˆè³‡ç§‘ ï½…è³‡ç¨ç§€ [33;47m csNCHU.twbbs.org [m
 [1m[44mâ””[43mâ”˜[m O[1mri[30mgi[mn: [1;36mqazq [30må¾ [35m61-216-137-35.HINET-IP.hinet.net [30mç™¼è¡¨[m
