ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: ã€è«‹æ•™ã€‘ä½¿ç”¨è€…åå–®â€¦
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/10/19 Tue 10:00:40)                Updated: 2004/10/19

â€» å¼•è¿°ã€Šonline (åªåœ¨ä¸Šç·šæ™‚æ„›ä½ )ã€‹ä¹‹éŠ˜è¨€ï¼š
> æœ‰é—œä½¿ç”¨è€…åå–®ï¼Œèƒ½ä¸èƒ½åƒkkä¸€æ¨£åœ¨æœ€ä¸‹æ–¹é¡¯ç¤º"å…¬å‘Šoræ´»å‹•"çš„è¨Šæ¯å‘¢?

  å…ˆåšç²¾è¯å€çš„ xover.c é è¦½
  å†åšä»¥ä¸‹è®Šå‹•

: xover.c:preview_news() åŠ åœ¨ preview_tip() å¾Œé¢

static void
preview_news()
{
  int i, j, msg_num;
  char msg[128];
  FILE *fp;

  if (!(fp = fopen(FN_ETC_NEWS, "r")))
    return;

  fgets(msg, 128, fp);
  msg_num = atoi(msg);         /* ç¬¬ä¸€è¡Œè¨˜éŒ„ç¸½ç¯‡æ•¸ */
  i = time(0) % msg_num + 1;
  j = 0;

  while (j < i)                        /* å–ç¬¬ i å€‹ tip */
  {
    fgets(msg, 128, fp);
    if (msg[0] == '#')
      j++;
  }

  fgets(msg, 128, fp);
  outs(msg);
  fgets(msg, 128, fp);
  outs(msg);
  fclose(fp);
}

: xover.c:xo_knee()

  case XZ_ULIST:
-   {
-     typedef UTMP *pickup;
-     extern pickup ulist_pool[];
-     preview_userid(ulist_pool[xo->pos]->userid);
-   }
+   preview_news();
    break;

: xover.c:xover()

  int pos, num, zone, sysmode;
  XO *xo;
  KeyFunc *xcmd, *cb;

+ if (cmd == XZ_ULIST)      /* ä½¿ç”¨è€…åå–®å¼·åˆ¶æœ‰ feet */
+   XO_TALL = b_lines - 7;

  for (;;)
  {

  ...
  ...

    else if (cmd == '!')
    {
+     if (zone == XZ_ULIST)
+       cmd = XO_NONE;
+     else
+     {
      XO_TALL = (XO_TALL == b_lines - 3) ? b_lines - 7 : b_lines - 3;
      cmd = XO_LOAD;
+     }
    }

: global.h

#define FN_ETC_TIP      "etc/tip"               /* æ¯æ—¥å°ç§˜è¨£ */

+ #define FN_ETC_TIP      "etc/news"               /* æ–°è */

: admutil.c:a_xfile()

#ifdef HAVE_TIP
    "æ¯æ—¥å°ç§˜è¨£",
#endif
+   "æ–°è",

  ...
  ...

#ifdef HAVE_TIP
    FN_ETC_TIP,
#endif
+   FN_ETC_NEWS,

--------------------------------------------------------------------

  ç„¶å¾Œå¾ BBS ç«™ä¸Š 0Admin -> Xfile å»ç·¨è¼¯ã€Œæ–°èã€é€™æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹

>>>>>>> ç¬¬ä¸€è¡Œè¦è¨˜éŒ„ç¸½å…±æœ‰å¹¾å‰‡æ–°èï¼Œæ¯å‰‡æ–°èæœ‰ä¸‰è¡Œ (ä¸€è¡Œ#ã€äºŒè¡Œå…§å®¹)
>>>>>>> ä¸‹è¡Œç‚ºæª”æ¡ˆé–‹å§‹ (æœ¬è¡Œä¸åŒ…æ‹¬)
04

# 01
æ–°èä¸€ç¬¬ä¸€è¡Œå…§å®¹
æ–°èä¸€ç¬¬äºŒè¡Œå…§å®¹

# 02
æ–°èäºŒç¬¬ä¸€è¡Œå…§å®¹
æ–°èäºŒç¬¬äºŒè¡Œå…§å®¹

# 03
æ–°èä¸‰ç¬¬ä¸€è¡Œå…§å®¹
æ–°èä¸‰ç¬¬äºŒè¡Œå…§å®¹

# 04
æ–°èå››ç¬¬ä¸€è¡Œå…§å®¹
æ–°èå››ç¬¬äºŒè¡Œå…§å®¹
>>>>>>> ä¸Šè¡Œç‚ºæª”æ¡ˆçµæŸ (æœ¬è¡Œä¸åŒ…æ‹¬)


--
 [1;41mâ•­[44mâ”¼[m Or[1mig[30min[m: [43m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [35;47m processor.tfcis.org [m
 [1;42mâ”¼[45mâ”˜[m A[1mut[30mho[mr: [1;31mitoc [30må¾ [36mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
