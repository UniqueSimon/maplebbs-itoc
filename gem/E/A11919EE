ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: è«‹å•ä¿®æ”¹æ–‡ç« /ä¿¡ä»¶æª”é ­
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/02/26 Thu 23:38:50)                Updated: 2006/02/23

â€» å¼•è¿°ã€ŠAwing (å±±å¡ç¾Š)ã€‹ä¹‹éŠ˜è¨€ï¼š
> ç‚ºäº†é©æ‡‰èˆŠç«™ä½¿ç”¨è€…ç¿’æ…£,
> æˆ‘æŠŠæª”é ­å¤šåŠ ä¸Šäº†ä¸€æ§“,
> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

: more.c:more()

int
more(fpath, footer)
  char *fpath;
  char *footer;
{
+ #define MSG_SEPERATE    "\033[36m"MSG_SEPERATOR"\033[m\n"
+ uschar *fnew;

  ...
  ...

    if (!*buf)  /* ç¬¬ä¸€æ¬¡ "\n\n" æ˜¯æª”é ­çš„çµå°¾ */
      break;
  }
  headend = foff;

+ if (header_len && footer)     /* ä¸€èˆ¬æ–‡ç« ï¼Œåœ¨æª”é ­èˆ‡æœ¬æ–‡ä¹‹é–“åŠ å…¥åˆ†éš”ç·š */
+ {
+   lino = strlen(MSG_SEPERATE);
+
+   if (!(fnew = malloc(fsize + lino)))
+   {
+     free(fimage);
+     return -1;
+   }
+
+   shift = foff - fimage;
+   memcpy(fnew, fimage, shift);
+   memcpy(fnew + shift, MSG_SEPERATE, lino);
+   memcpy(fnew + shift + lino, foff, fsize - shift);
+
+   free(fimage);
+   fsize += lino;
+   fimage = fnew;
+   fend = fimage + fsize;
+   headend = fimage + shift;
+ }

  /* æ­¸é›¶ */
  foff = fimage;

--
 [1;43mâ•­[46mâ”¼[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [32;47m processor.tfcis.org [m
 [1;44mâ”¼[41mâ•¯[m A[1mut[30mho[mr: [1;33mitoc [30må¾ [35mitoc.dorm11.nctu.edu.tw [30mç™¼è¡¨[m
