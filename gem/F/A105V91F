ä½œè€…: itoc (é€£éœ¸å¤¢ç¢Ž) çœ‹æ¿: plan
æ¨™é¡Œ: [ä¿®æ­£] å¾ªç’°æœå°‹ä¸‹ä¸€å€‹æœªè®€çœ‹æ¿
æ™‚é–“: 2004/03/23 Tue 10:42:03                           Updated: 2004/03/23

â€» å¼•è¿°ã€Šmusashi634.bbs@wretch.twbbs.org (å…­ä¸‰å››)ã€‹ä¹‹éŠ˜è¨€ï¼š
>   å‡è¨­ç«™ä¸Šæœ‰ 50 å€‹æ¿
>   æ¸¸æ¨™ç¾åœ¨åœ¨ç·¨è™Ÿ 46 çš„çœ‹æ¿å‰é¢ï¼Œå¦‚æžœå¾žç·¨è™Ÿ 46 è‡³ 50 éƒ½æ²’æœ‰æ–°æ–‡ç« 
>   ç·¨è™Ÿ 13 çš„çœ‹æ¿æœ‰æ–°æ–‡ç« ï¼Œæ¸¸æ¨™ä¸æœƒç§»å‹•åˆ° ç·¨è™Ÿ 13 çš„çœ‹æ¿
>   å¾—å…ˆæŠŠæ¸¸æ¨™å¾€ä¸Šç§»å‹•ï¼Œç„¶å¾Œé‡æ–°
>   å¯ä»¥è«‹æ•™ä¸€ä¸‹ï¼Œæœ‰è¾¦æ³•æ”¹æˆå¯ä»¥å¾ªç’°æœå°‹å—Žï¼Ÿ

: board.c:class_body()

#ifdef AUTO_JUMPBRD
  nextpos = 0;

  /* itoc.010910: æœå°‹ä¸‹ä¸€å€‹æœªè®€çœ‹æ¿ */
  if (class_jumpnext)
  {
    class_jumpnext = 0;
    n = xo->pos;
    chp = (short *) xo->xyz + n;

    while (n < max)
    {
      chn = *chp++;
      if (chn >= 0)
      {
        BRD *brd;

        brd = bcache + chn;

#ifdef ENHANCED_VISIT
        /* itoc.010407: æ”¹ç”¨æœ€å¾Œä¸€ç¯‡å·²è®€/æœªè®€ä¾†åˆ¤æ–· */
        brh_get(brd->bstamp, chn);
        if (brh_unread(brd->blast))
#else
        if (brd->blast > brd_visit[chn])
#endif
        {
          nextpos = n;
          break;
        }
      }
      n++;
    }

+   /* å¦‚æžœæ‰¾åˆ°æœ€å¾Œä¸€å€‹æ¿éƒ½æ‰¾ä¸åˆ°æœªè®€ï¼Œé‚£éº¼å¾ªç’°å†å¾žé ­æ‰¾ */
+   if (!nextpos)
+   {
+     n = 0;
+     chp = (short *) xo->xyz + n;
+   }
+
+   while (n < xo->pos)
+   {
+     chn = *chp++;
+     if (chn >= 0)
+     {
+       BRD *brd;
+
+       brd = bcache + chn;
+
+#ifdef ENHANCED_VISIT
+       /* itoc.010407: æ”¹ç”¨æœ€å¾Œä¸€ç¯‡å·²è®€/æœªè®€ä¾†åˆ¤æ–· */
+       brh_get(brd->bstamp, chn);
+       if (brh_unread(brd->blast))
+#else
+       if (brd->blast > brd_visit[chn])
+#endif
+       {
+         nextpos = n;
+         break;
+       }
+     }
+     n++;
+   }

    /* ä¸‹ä¸€å€‹æœªè®€æ¿åœ¨åˆ¥é ï¼Œè¦ç¿»éŽåŽ» */
-   if (nextpos >= cnt + XO_TALL)
+   if (nextpos < cnt || nextpos >= cnt + XO_TALL)
      return nextpos + XO_MOVE;
  }
#endif

--
  å¯«è »é«’çš„ :p

--
[1;37mâ–¡ æœ¬æ–‡ç« ç”± [33mitoc[37m å¾ž [32mitoc.Dorm11.NCTU.edu.tw[37m ç™¼è¡¨[m
