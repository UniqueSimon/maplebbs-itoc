ç™¼ä¿¡äºº: qazq.bbs@bbs.cs.nchu.edu.tw (ï¼Šç¨ä¸€ç„¡äºŒï¼Š) çœ‹æ¿: plan
æ¨™  é¡Œ: [åŠŸèƒ½] å¥½å‹åç‰‡æª”ã€‚
ç™¼ä¿¡ç«™: ä¸­èˆˆè³‡ç§‘ (2004/08/09 Mon 14:05:44)                Updated: 2004/10/07

â€» å¼•è¿°ã€Šmdfh.bbs@processor.tfcis.org (æƒ¡é­”é»¨)ã€‹ä¹‹éŠ˜è¨€ï¼š
> ä¸çŸ¥é“æœ‰æ²’æœ‰è¾¦æ³•åšå‡ºé€™æ¨£çš„æ±è¥¿
> ä½¿ç”¨è€…å»ºè­°çš„ ._.
> åç‰‡æª”åˆ†æˆå…©ç¨®ï¼Œåœ¨æŒ‰ENTERæŸ¥è©¢æ™‚å¯ä»¥é¸æ“‡ ä¸€èˆ¬åç‰‡æª”  å’Œ  å¥½å‹åç‰‡æª”
> å¦‚æœå°æ–¹æœ‰åŠ å…¥ä½ ç‚ºå¥½å‹ å°±å¯ä»¥çœ‹åˆ° å¥½å‹åç‰‡æª”çš„é¸é …

: global.h

/* ----------------------------------------------------- */
/* å€‹äººç›®éŒ„æª”åè¨­å®š                                      */
/* ----------------------------------------------------- */


#define FN_ACCT     ".ACCT"     /* User account */
#define FN_BRH      ".BRH"      /* board reading history */
#define FN_CZH      ".CZH"      /* class zap history */

#define FN_PLANS    "plans"     /* è¨ˆç•«æª” */
+ #define FN_GOODPLANS    "GoodPlans" /* å¥½å‹åç‰‡æª” */    [1;44m // æª”åè‡ªå·±æ”¹ [m


: acct.c:u_xfile()

  static char *desc[] =
  {
    "ä¸Šç«™åœ°é»è¨­å®šæª”",
    "åç‰‡æª”",
+   "å¥½å‹åç‰‡æª”",

  ......
  ......

  static char *path[] =
  {
    "acl",
    "plans",
+   FN_GOODPLANS,

: maple.p

+ int is_hisgood(UTMP *up, char *userid);

: pal.c:is_hisgood() æ–°å¢æ­¤å‡½å¼åœ¨ is_ogood() å¾Œé¢

int
is_hisgood(up, userid)
  UTMP *up;
  char *userid;
{
  int max;
  char fpath[64];
  int pool[PAL_MAX];

  if (up)
    return is_ogood(up);

  usr_fpath(fpath, userid, fn_pal);
  max = image_pal(fpath, pool);

  return belong_pal(pool, max, cuser.userno);
}

: talk.c:do_query()

+ if (is_hispal(up, userid) && vans("æ˜¯å¦çœ‹å¥½å‹å°ˆå±¬åç‰‡(Y/N)ï¼Ÿ[N] ") == 'y')
+   showgoodplans(userid);
+ else
    showplans(userid);
  vmsg(NULL);
}

: talk.c:showgoodplans()  æ–°å¢æ•´æ”¯å‡½å¼åœ¨ showplans() ä¸‹é¢

static void
showgoodplans(userid)
  char *userid;
{
  int i;
  FILE *fp;
  char buf[ANSILINELEN];

  usr_fpath(buf, userid, FN_GOODPLANS);
  if (fp = fopen(buf, "r"))
  {
    i = MAXQUERYLINES;
    while (i-- && fgets(buf, sizeof(buf), fp))
      outx(buf);
    fclose(fp);
  }
}

--
 [1m[42mâ”Œ[41mâ”¼[m Au[1mth[30mor[m: [43m ä¸­èˆˆè³‡ç§‘Ë™ä¸­èˆˆè³‡ç§‘ ï½…è³‡ç¨ç§€ [33;47m csNCHU.twbbs.org [m
 [1m[44mâ””[43mâ”˜[m O[1mri[30mgi[mn: [1;36mqazq [30må¾ [35m218-170-129-23.dynamic.hinet.net [30mç™¼è¡¨[m
