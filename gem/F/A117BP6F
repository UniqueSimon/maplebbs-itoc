ä½œè€…: itoc (ç«™ä¸Šäººæ•¸ï¼š802) ç«™å…§: plan
æ¨™é¡Œ: Re: [å•é¡Œ] å¯ä»¥åšåˆ° anonymous èˆ‡ unanonymous çš„æŽ¨æ–‡é€£å‹•å—Žï¼Ÿ
æ™‚é–“: 2005/01/12 Wed 09:55:47                           Updated: 2005/01/12

â€» å¼•è¿°ã€ŠBioStar.bbs@micro.bio.ncue.edu.tw (æ¾Žæ¹–å°é›²é›€)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æƒ³èªª anonymous èˆ‡ unanonymous æ˜¯å¦ä¹Ÿå¯ä»¥æŽ¨æ–‡é€£å‹•......
> å› ç‚º anonymous èˆ‡ unanonymous çš„ chrono ç›¸åŒ......

  å¦‚æžœä½ åªæœ‰ä¸€å€‹åŒ¿åçœ‹æ¿ï¼Œä½† anonymous èˆ‡ unanonymous çš„ chrono
  æœ‰å¾ˆå¤§å¯èƒ½æ˜¯ç›¸åŒçš„ (é‚„æ˜¯æœ‰å¯èƒ½å·® 1 ç§’)

  é‚£å¯ä»¥é€™æ¨£æ”¹

: post.c:do_unanonymous()

- hdr_stamp(folder, HDR_LINK | 'A', &hdr, fpath);
+ hdr_stamp(folder, HDR_COPY | 'A', &hdr, fpath);

: post.c:post_score()

  if (fp = fopen(fpath, "a"))
  {
    time_t now;
    struct tm *ptime;
+   char folder[64], buf[80];

    time(&now);
    ptime = localtime(&now);

-   fprintf(fp, "â†’ \033[36m%s %s\033[mï¼š%-*s%02d/%02d/%02d\n",
+   sprintf(buf, "â†’ \033[36m%s %s\033[mï¼š%-*s%02d/%02d/%02d\n",
      userid, verb, 62 - strlen(userid), reason,
      ptime->tm_year % 100, ptime->tm_mon + 1, ptime->tm_mday);
+   fputs(buf, fp);
    fclose(fp);

+#ifdef HAVE_ANONYMOUS
+   if ((currbattr & BRD_ANONYMOUS) && strcmp(userid, cuser.userid))
+   {
+     brd_fpath(folder, BN_UNANONYMOUS, fn_dir);
+     hdr_fpath(fpath, folder, hdr);
+     f_cat(fpath, buf);
+   }
+#endif
  }

--
[1;37mâ–¡ æœ¬æ–‡ç« ç”± [33mitoc[37m å¾ž [32mitoc.Dorm11.NCTU.edu.tw[37m ç™¼è¡¨[m
