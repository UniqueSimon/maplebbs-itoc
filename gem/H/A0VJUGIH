ä½œè€…: itoc (:MM:) çœ‹æ¿: itoc
æ¨™é¡Œ: Re: [å•é¡Œ]æ¿ä¸»è‡ªè¨‚ç™¼æ–‡ç¶±é ˜
æ™‚é–“: Fri Apr 18 14:51:23 2003                          Updated: 2005/05/26

â€» å¼•è¿°ã€ŠDinsam.bbs@whshs.cs.nccu.edu.tw (å‰ä¸–.. o.O)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æˆ‘åƒè€ƒé€²æ¿ç•«é¢ å¯«äº†ä¸€å€‹æ¿ä¸»è‡ªè¨‚ç™¼æ–‡ç¶±é ˜

: global.h

#define FN_NOTE         "note"          /* é€²æ¿ç•«é¢ */
+ #define FN_POSTLAW    "postlaw"       /* ç™¼æ–‡ç¶±é ˜ */

: post.c:do_post()

+ brd_fpath(fpath, currboard, FN_POSTLAW);
+ if (more(fpath, (char *) -1) < 0)
    film_out(FILM_POST, 0);

  prints("ç™¼è¡¨æ–‡ç« æ–¼ã€ %s ã€‘çœ‹æ¿", currboard);

: manage.c:post_postlaw_edit() æ–°å¢æ–¼ post_memo_edit() å¾Œé¢

/* ----------------------------------------------------- */
/* æ¿ä¸»åŠŸèƒ½ : ä¿®æ”¹ç™¼æ–‡ç¶±é ˜                               */
/* ----------------------------------------------------- */


static int
post_postlaw_edit(xo)       /* æ¿ä¸»è‡ªå®šæ–‡ç« ç™¼è¡¨ç¶±é ˜ */
  XO *xo;
{
  int mode;
  char fpath[64];

  mode = vans("æ–‡ç« ç™¼è¡¨ç¶±é ˜ (D)åˆªé™¤ (E)ä¿®æ”¹ (Q)å–æ¶ˆï¼Ÿ[E] ");

  if (mode != 'q')
  {
    brd_fpath(fpath, currboard, FN_POSTLAW);

    if (mode == 'd')
    {
      unlink(fpath);
      return XO_FOOT;
    }

    if (vedit(fpath, 0))      /* Thor.981020: æ³¨æ„è¢«talkçš„å•é¡Œ */
      vmsg(msg_cancel);
    return XO_HEAD;
  }
  return XO_FOOT;
}

: manage.c:post_manage()

    "WMemo   ç·¨è¼¯é€²æ¿ç•«é¢",
+   "PostLaw ç·¨è¼¯ç™¼æ–‡ç¶±é ˜",

  ...
  ...

- char *menu = "â— æ¿ä¸»é¸å–® (B)ä¸»é¡Œ (W)é€²æ¿ (M)å‰¯æ¿"
+ char *menu = "â— æ¿ä¸»é¸å–® (B)ä¸»é¡Œ (W)é€²æ¿ (P)ç¶±é ˜ (M)å‰¯æ¿"

  ...
  ...

  case 'w':
    return post_memo_edit(xo);

+ case 'p':
+   return post_postlaw_edit(xo);

--
    [1;32mâ•­â”€ Origin â”€â•— [0;36m?[1m?[0;36m?[1mO[0;36m?[1m?[0;36m?[1m?[1;31m processor.tfcis.org [32m ï½ ÎºÎ»Î¼ â”€â”¤[m
    [1;32mâ”œ   Author   â•¡ [33;44mitoc.Dorm-GD2.NCTU.edu.tw                [m
