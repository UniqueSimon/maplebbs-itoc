ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (:MM:), çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ] ä½¿ç”¨è€…ä¿®æ”¹è‡ªå·±çš„æ–‡ç« ä¸èƒ½æ”¹æ¨™é¡Œ
ç™¼ä¿¡ç«™: XEON (Thu Dec 26 12:01:54 2002)                   Updated: 2005/10/07

â€» å¼•è¿°ã€Šchonsi.bbs@WithHeart.twbbs.org (å†°å¡Šä¸­çš„çƒˆç« - å†°ç„°)ã€‹ä¹‹éŠ˜è¨€ï¼š
> ç•¶ä½¿ç”¨è€…ä¿®æ”¹è‡ªå·±çš„æ–‡ç« çš„æ™‚å€™...
> Ctrl+x æœƒé¡¯ç¤ºå‡º
> [S]å­˜æª” (A)æ”¾æ£„ (T)æ”¹æ¨™é¡Œ (E)ç¹¼çºŒ (R/W/D)è®€å¯«åˆªæš«å­˜æª”ï¼Ÿ
> æ­¤æ™‚é¸æ“‡ T å»ä¸èƒ½ä¿®æ”¹æ¨™é¡Œ...
> åªèƒ½å¤ åœ¨æ–‡ç« åˆ—è¡¨æŒ‰ä¸‹ T ä¿®æ”¹...

  å¦‚æžœæƒ³æ”¹çš„è©±..æ‡‰è©²æ˜¯é€™æ¨£å­

: edit.c:ve_filer()

  case 't':
-   if (ve_op > 0)              /* itoc.010301: ä¸èƒ½å„²å­˜ */
+   if (ve_op >= 0)             /* itoc.010301: ä¸èƒ½å„²å­˜ */
    {
      strcpy(buf, ve_title);
      if (!vget(b_lines, 0, "æ¨™é¡Œï¼š", ve_title, TTLEN + 1, GCARRY))
        strcpy(ve_title, buf);
    }
    return VE_FOOTER;

: post.c:post_edit()

  hdr_fpath(fpath, xo->dir, hdr);
+ strcpy(ve_title, hdr->title);

  ...
  ...

+ if (strcmp(ve_title, hdr->title))     /* æ›´å‹•äº†æ¨™é¡Œ */
+ {
+   strcpy(hdr->title, ve_title);
+   currchrono = hdr->chrono;
+   rec_put(xo->dir, hdr, sizeof(HDR), xo->key == XZ_XPOST ?
+     hdr->xid : xo->pos, cmpchrono);
+   return XO_INIT;   /* itoc.021226: XZ_POST å’Œ XZ_XPOST å…±ç”¨ post_edit() */
+ }

  /* return post_head(xo); */
  return XO_HEAD;     /* itoc.021226: XZ_POST å’Œ XZ_XPOST å…±ç”¨ post_edit() */
}

: mail.c:mbox_edit()

  hdr = (HDR *) xo_pool + (xo->pos - xo->top);
  hdr_fpath(fpath, xo->dir, hdr);

  if (!strcmp(hdr->owner, cuser.userid) || HAS_PERM(PERM_ALLBOARD))
+ {
+   strcpy(ve_title, hdr->title);
    vedit(fpath, 0);
+   if (strcmp(ve_title, hdr->title))     /* æ›´å‹•äº†æ¨™é¡Œ */
+   {
+     strcpy(hdr->title, ve_title);
+     currchrono = hdr->chrono;
+     rec_put(xo->dir, hdr, sizeof(HDR), xo->key == XZ_XPOST ?
+       hdr->xid : xo->pos, cmpchrono);
+     return mbox_init(xo);
+   }
+ }
  else
    vedit(fpath, -1);   /* åªèƒ½ç·¨è¼¯ä¸å¯å„²å­˜ */

  return mbox_head(xo);
}

: gem.c:gem_edit()

  if (!(level & GEM_W_BIT) || ((hdr->xmode & GEM_RESERVED) && !(level & GEM_X_BIT)))
  {
    vedit(fpath, -1);
  }
  else
  {
+   strcpy(ve_title, hdr->title);
    if (vedit(fpath, 0) >= 0)
+   {
      gem_log(xo->dir, "ä¿®æ”¹", hdr);
+     if (strcmp(ve_title, hdr->title))     /* æ›´å‹•äº†æ¨™é¡Œ */
+     {
+       strcpy(hdr->title, ve_title);
+       rec_put(xo->dir, hdr, sizeof(HDR), xo->pos, NULL);
+       return gem_init(xo);
+      }
+   }
  }

--
    [1;36mâ•­â”€â”€ Origin â•® [37må‹•åŠ›æ ¸å¿ƒ [33;45m processor.tfcis.org [36;40m ï½ž Î±Î²Î³ â”€â”€â”¼[m
    [1;36mâ”¼     Author â•¯ [32mitoc.Dorm-GD2.NCTU.edu.tw[m
