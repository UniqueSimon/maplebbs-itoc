ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ] ç†±é–€çœ‹æ¿ ä»¥åŠ çœ‹æ¿äººæ°£
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2006/03/26 Sun 12:25:45)                Updated: 2006/03/27

â€» å¼•è¿°ã€Šguessi.bbs@bbs.wretch.cc (æ²’)ã€‹ä¹‹éŠ˜è¨€ï¼š
> ç¾åœ¨çš„äººæ•¸è¨ˆæ¬¡ æœ‰æ™‚ç”šè‡³æœƒå‡ºç¾éš±è—çœ‹æ¿ æ˜æ˜åªæœ‰ä¸€å€‹äººé€²å¾—äº†çœ‹æ¿ å»æœ‰äººæ°£ > 1
> è‹¥ä»¥è¨ˆç®—æ¿å‹çš„æ–¹å¼æ‡‰è©²å¯ä»¥è§£æ±ºå§ ? è«‹å•è©²æ€éº¼åšå‘¢ ?
> çœŸçš„ä¸èƒ½å³æ™‚bmateæ•¸é‡å—? é‚„æ˜¯èªªé‚£æ¨£å¾ˆè€—I/O
> æŠ±æ­‰å°æ–¼é€™éƒ¨åˆ†ä¸å¤ªäº†è§£ é‚„è«‹æŒ‡æ•™

: cache.c:utmp_brdmate() æ–°å¢æ­¤å‡½å¼åœ¨ utmp_find() å¾Œé¢

int
utmp_brdmate(bname)
  char *bname;
{
  UTMP *uentp, *uceil;
  int num;

  num = 0;
  uentp = ushm->uslot;
  uceil = (void *) uentp + ushm->offset;
  do
  {
    if ((uentp->mode == M_READA) && !strcmp(uentp->reading, bname))
      num++;
  } while (++uentp <= uceil);

  return num;
}

: post.c:post_head()

- prints(NECKER_POST, d_cols, "", currbattr & BRD_NOSCORE ? "â•³" : "â—‹",
-   bshm->mantime[currbno]);
+ prints(NECKER_POST, d_cols, "", currbattr & BRD_NOSCORE ? "â•³" : "â—‹",
+   utmp_brdmate(currboard));

: board.c:class_item()

  /* è™•ç† äººæ°£ */
- bno = bshm->mantime[bno];
+ bno = utmp_brdmate(brd->brdname);

  é€™æ¨£å°±æ˜¯å³æ™‚çš„äº†ï¼Œä¸éè¦ä»˜å‡ºä¸€äº›ä»£åƒ¹

> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ <

  è‹¥æœ‰åš [åŠŸèƒ½] board.c åˆ†çµ„è¨è«–é›†æ–°å¢ç†±é–€çœ‹æ¿
  é‚£éº¼é‚„è¦æ”¹

: cache.c:utmp_brdmate()

  int num;
+ int bno;

+ if ((bno = brd_bno(bname)) < 0)
+   return -1;

  ...
  ...

+ bshm->mantime[bno] = num;

  return num;

--
[1;36m=[37m[[36mï¹[37m:[33m?[37mæ‘ƒ?[mâ—£?[1;33m?[37m:[36mï¹ [31mOrigin[37m ]|[[m  [0;31m?[1m?[1m?[0;31mO[0;31m?[1m?[1m?[0;31m?[1mcpu.tfcis.org  [37m]|[?[33mæŸèªª[m?[1;36mï¹[37m:][36m=[m
[1;36m=[0m[[1;36mï¹Š[37m:[33m?[30mæ‘ƒ?[mâ•±?[1;33m?[37m:[36mï¹Š [31mAuthor[m ]|[[1m itoc.Dorm11.NCTU.edu.tw  [m]|[?[1;33m?[30m?[37mæ’[30m?[36mï¹Š[37m:[m][1;36m=[m
