ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ] æœ‰é—œç«™å…§çœ‹æ¿äº’è½‰æ–‡ç« 
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2005/04/21 Thu 08:44:52)                Updated: 2005/04/21

â€» å¼•è¿°ã€Šshadowofsoul (Shadow Of Soul)ã€‹ä¹‹éŠ˜è¨€ï¼š
> å¸Œæœ›èƒ½å¤ poståœ¨ä¸€å€‹æ¿(ex. å…¬å‘Šç‰ˆ)
> ä»–å°±æœƒè‡ªå‹•è½‰ä¿¡åˆ°æŸäº›éœ€è¦å…¬å‘Šçš„ç‰ˆ
â€» å¼•è¿°ã€Šcchhsu (AG)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æœ‰æ²’æœ‰è¾¦æ³•æ”¹æˆ ...postå¾Œå°±æœƒè‡ªå‹•è½‰poåˆ° XXåˆ†é¡žåŽ»å‘¢

  ç«™é•·åœ¨ XXXX æ¿çš„ post æœƒè‡ªå‹•è½‰åŽ»åˆ†é¡žæ˜¯ [å€‹äºº] çš„æ‰€æœ‰çœ‹æ¿

: post.c:do_post()

+ if (HAS_PERM(PERM_ALLADMIN) && !strcmp(currboard, "XXXX"))   [1;44m // XXXX è‡ªè¨‚ [m
+   copy_post(&hdr, fpath);

  unlink(fpath);

  vmsg(NULL);

: post.c:copy_post() æ–°å¢žæ­¤å‡½å¼åœ¨ do_post() å‰é¢
: å¦‚æžœæ˜¯å¸Œæœ›ã€Œè‡ªå‹•è½‰åŽ»åˆ†é¡žæ˜¯ [å€‹äºº] çš„æ‰€æœ‰çœ‹æ¿ã€ï¼Œé‚£éº¼é€™æ¨£æ”¹

static void
copy_post(hdr, fpath)
  HDR *hdr;
  char *fpath;
{
  char folder[64];
  HDR post;
  BRD *brdp, *bend;

  brdp = bshm->bcache;
  bend = brdp + bshm->number;

  while (brdp < bend)
  {
    if (!strcmp(brdp->class, "å€‹äºº"))   [1;44m // åˆ†é¡žè‡ªå®š [m
    {
      brd_fpath(folder, brdp->brdname, fn_dir);
      hdr_stamp(folder, HDR_COPY | 'A', &post, fpath);
      memcpy(post.owner, hdr->owner, TTLEN + 140);
      rec_bot(folder, &post, sizeof(HDR));
    }
    brdp++;
  }
}

: post.c:copy_post() æ–°å¢žæ­¤å‡½å¼åœ¨ do_post() å‰é¢
: å¦‚æžœæ˜¯å¸Œæœ›ã€Œè‡ªå‹•è½‰åŽ»çœ‹æ¿ YYYYã€ï¼Œé‚£éº¼é€™æ¨£æ”¹

static void
do_post(fpath)
  HDR *hdr;
  char *fpath;
{
  char folder[64];
  HDR post;

  brd_fpath(folder, "YYYY", fn_dir);      [1;44m // çœ‹æ¿è‡ªå®š [m
  hdr_stamp(folder, HDR_COPY | 'A', &post, fpath);
  memcpy(post.owner, hdr->owner, TTLEN + 140);
  rec_bot(folder, &post, sizeof(HDR));
}

--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ž [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
