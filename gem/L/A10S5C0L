ä½œè€…: itoc (ç«™ä¸Šäººæ•¸ï¼š802) çœ‹æ¿: plan
æ¨™é¡Œ: [åŠŸèƒ½] ç°¡é«”æ”¯æ´ (1)
æ™‚é–“: 2004/12/17 Fri 18:05:29                           Updated: 2004/12/17

â€» å¼•è¿°ã€Šintelp.bbs@wretch.csie.nctu.edu.tw (....)ã€‹ä¹‹éŠ˜è¨€ï¼š
> å°±æ˜¯å‘ç„¡åç«™ä¸€æ¨£...
> è¼¸å…¥å¸³è™Ÿå¾Œé¢å†å¤šåŠ ä¸€å€‹ é»
> å°±å¯ä»¥è½‰æˆ ç°¡é«”ç•«é¢...

  é€²ç«™è¼¸å…¥ ID å¾Œé¢åŠ å€‹ . è¡¨ç¤º ç”¨ç°¡é«”

: global.h

+ VAR int trans2gb;             /* è½‰æˆç°¡é«”ä¸­æ–‡ */
VAR int bbsmode;                /* bbs operating mode, see modes.h */
VAR usint bbstate;              /* bbs operatine state */

: bbsd.c:login_user()

  int attempts;         /* å˜—è©¦å¹¾æ¬¡éŒ¯èª¤ */
  int multi;
+ int len;
- char fpath[64], uid[IDLEN + 1];
+ char fpath[64], uid[IDLEN + 2];
#ifndef CHAT_SECURE
  char passbuf[PSWDLEN + 1];
#endif

  move(b_lines, 0);
  outs("   â€» åƒè§€å¸³è™Ÿï¼š\033[1;32m" STR_GUEST "\033[m  ç”³è«‹æ–°å¸³è™Ÿï¼š...");
+ move(b_lines - 3, 0);
+ outs("Add '.' after your ID for simplified Chinese GB support");

  ...
  ...

-   vget(b_lines - 2, 0, "   [æ‚¨çš„å¸³è™Ÿ] ", uid, IDLEN + 1, DOECHO);
+   vget(b_lines - 2, 0, "   [æ‚¨çš„å¸³è™Ÿ] ", uid, IDLEN + 2, DOECHO);

+   len = strlen(uid) - 1;
+   if (uid[len] == '.')
+   {
+     uid[len] = '\0';
+     trans2gb = 1;
+   }

--
[1;37mâ–¡ æœ¬æ–‡ç« ç”± [33mitoc[37m å¾ [32mitoc.Dorm11.NCTU.edu.tw[37m ç™¼è¡¨[m
