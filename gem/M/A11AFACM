ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ]æœ‰èˆ‰è¾¦æŠ•ç¥¨orè³­ç›¤åŒæ™‚åœ¨æ¿ä¸Špoæ–‡
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2005/06/09 Thu 03:13:06)                Updated: 2005/06/09

â€» å¼•è¿°ã€Šdreambird.bbs@bbs.wretch.cc (bird)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æœ‰èˆ‰è¾¦æŠ•ç¥¨orè³­ç›¤åŒæ™‚åœ¨æ¿ä¸Špoæ–‡

  å…ˆåšç²¾è¯å€
  [åŠŸèƒ½] post.c ç™¼æ–‡åˆ°çœ‹æ¿

: vote.c:vote_add()

static int
vote_add(xo)
  XO *xo;
{
+ FILE *fp;

  ...
  ...

  rec_add(dir, &vch, sizeof(vch));

+ sprintf(fpath, "tmp/vote.%s", cuser.userid);
+ if (fp = fopen(fpath, "w"))
+ {
+   sprintf(title, "æœ¬æ¿é–‹å§‹%s", vch.vgamble == '$' ? "è³­ç›¤" : "æŠ•ç¥¨");
+
+   /* æ–‡ç« æª”é ­ */
+   fprintf(fp, "%s %s (%s)\n", str_author1, cuser.userid, cuser.username);
+   fprintf(fp, "æ¨™é¡Œ: %s\næ™‚é–“: %s\n\n", title, Now());
+
+   /* æ–‡ç« å…§å®¹ */
+   fprintf(fp, "%s\n%s\n", title, vch.title);
+   fclose(fp);
+
+   add_post(currboard, fpath, title);
+   unlink(fpath);
+ }

  vmsg("é–‹å§‹æŠ•ç¥¨äº†ï¼");
  return vote_init(xo);

--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
