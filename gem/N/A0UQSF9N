ä½œè€…: itoc (ä¸å¤ªç™¼å±•å¯¦é©—å®¤) ç«™å…§: plan
æ¨™é¡Œ: [åŠŸèƒ½] å¤šæ¨£èªç³»æª”æˆ–ä½¿ç”¨è€…è‡ªå®štheme
æ™‚é–“: Thu Sep  5 11:09:56 2002                          Updated: 2005/04/30

â€» å¼•è¿°ã€ŠLinuxBoy (-TMA-1-)ã€‹ä¹‹éŠ˜è¨€ï¼š
>   å°å¼Ÿç«™ä¸Šä½¿ç”¨è€…æœ€è¿‘æå‡ºä¸€å€‹å•é¡Œ..
>   å°å¼Ÿæƒ³åˆ°çš„åšæ³•æ˜¯å°‡æ‰€æœ‰æ–‡å­—çš„éƒ¨ä»½é€šé€šå¦å¤–å¯«é€²ä¸€å€‹æª”æ¡ˆè£¡é¢ï¼Œç„¶å¾Œ
>   ä¾ç…§ä½¿ç”¨è€…å€‹äººçš„è¨­å®šè¼‰å…¥ã€‚

: global.h

- #undef  VAR
- #undef  INI

: theme.h

  å°±æŠŠ #define xxx æ”¹æˆ VAR char *xxx INI()ï¼Œä¾‹å¦‚

- #define FEETER_CLASS    COLOR1 "  çœ‹æ¿é¸æ“‡  " COLOR2 " (c)æ–°æ–‡ç«  ..."
+ VAR char *FEETER_CLASS  INI(COLOR1 "  çœ‹æ¿é¸æ“‡  " COLOR2 " (c)æ–°æ–‡ç«  ...");

- #define FEETER_ULIST    COLOR1 "  ç¶²å‹åˆ—è¡¨  " COLOR2 " (f)å¥½å‹  ..."
+ VAR char *FEETER_ULIST  INI(COLOR1 "  ç¶²å‹åˆ—è¡¨  " COLOR2 " (f)å¥½å‹  ...");

  æ‰€æœ‰çš„ NECKER_* FOOTER_* FEETER_* VMSG_NULL ICON_* TOKEN_* éƒ½è¦æ”¹

: src/include/theme.1 æ–°å¢æ­¤æª”æ¡ˆ

  å°±æ˜¯æŠŠå‰›æ‰æœ‰æ”¹çš„ï¼Œä¾åºé€šé€šå¯«åœ¨é€™è£¡é¢ï¼Œä¸€å€‹ä¸€è¡Œ
  åœ¨é€™æª”æ¡ˆè£¡é¢å¯«çš„å¯ä»¥è·Ÿå‰›æ‰æ”¹çš„æ–‡å­—æ˜¯ä¸ä¸€æ¨£çš„ (ä¹Ÿå°±æ˜¯å¦å¤–ä¸€å€‹ä½ˆæ™¯ä¸»é¡Œ)

"\033[1;37;44m  é¸æ“‡çœ‹æ¿  \033[0;30;47m c:æ–°æ–‡ç«  vV:å·²è®€æœªè®€ ....\033[m"
"\033[1;37;44m  ç¶²å‹ç‹€æ³  \033[0;30;47m f:å¥½å‹ t:èŠå¤©  ....\033[m"

: src/include/theme.2 æ–°å¢æ­¤æª”æ¡ˆ

  å’Œ src/include/theme.1 ä¸€æ¨£çš„æ ¼å¼ï¼Œå¯ä»¥é€ å¦å¤–ä¸€å¥—é¡è‰²ã€æ–‡å­—çš„ä½ˆæ™¯ä¸»é¡Œ

: bbsd.c:load_theme() æ–°å¢æ­¤å‡½å¼æ–¼ tn_login() å‰é¢

#define MAX_MSG 500         /* å‡è¨­å…¨éƒ¨ç¨‹å¼æœ‰ 500 å€‹ message */
#define LOAD_THEME(x, i)    if (all_msg[i][0]) x = all_msg[i]

static void
load_theme()        /* è¼‰å…¥èªç³»æª” */
{
  int i;
  char *fpath, ans[3];
  FILE *fp;
  static char all_msg[MAX_MSG][80];

  /* é¸æ“‡èªç³»æª” */
  switch (vget(b_lines, 0, "ä½¿ç”¨å“ªä¸€å¥—ä½ˆæ™¯ä¸»é¡Œ(1-2)ï¼Ÿ ", ans, 3, DOECHO))
  {
  case '1':
    fpath = "src/include/theme.1";
    break;
  case '2':
    fpath = "src/include/theme.2";
    break;
  default:
    return;
  }

  /* è¼‰å…¥èªç³»æª” */
  if (fp = fopen(fpath, "r"))
  {
    for (i = 0; i < MAX_MSG; i++)
    {
      if (!fgets(all_msg[i], sizeof(all_msg[i]), fp))
        break;
    }
    fclose(fp);
  }

  [1;44m// æŠŠå‰é¢æœ‰æ”¹çš„å…¨éƒ¨ä¾åºå¯«åœ¨ä¸‹ä¾†ï¼Œ[m
  [1;44m// 0å°±æ˜¯è®€èªç³»æª”çš„ç¬¬ä¸€è¡Œï¼Œ1å°±æ˜¯è®€èªç³»æª”çš„ç¬¬äºŒè¡Œï¼Œä¾æ­¤é¡æ¨ [m
  /* æŠŠæ‰€æœ‰çš„ msg éƒ½æŒ‡å‘ all_msg[][] */
  LOAD_THEME(FEETER_CLASS, 0);
  LOAD_THEME(FEETER_ULIST, 1);
  ...
  ...
}

: bbsd.c:tn_login()

  multi = login_user(buf);
+ load_theme();


---

  é€™æ¨£çš„è©±ï¼Œç¨‹å¼å¯ä»¥æ”¹å¾ˆå°‘ï¼Œå°±åªè¦æ”¹ theme.h åŠ bbsd.c:load_theme()
  å’Œç·¨ä¿® theme.1 theme.2 theme.3 ç­‰èªç³»æª”

  global.h ä¹Ÿå¯ä»¥æ¯”ç…§è¾¦ç†

--
[1;37mâ–¡ æœ¬æ–‡ç« ç”± [33mitoc[37m å¾ [32m140.113.128.124[37m ç™¼è¡¨[m
