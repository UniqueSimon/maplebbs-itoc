ç™¼ä¿¡äºº: jd.bbs@bbs.eo.nhit.edu.tw (jdå¦¹ä»£æ‰“ä¸­), çœ‹æ¿: plan
æ¨™  é¡Œ: [ä¿®æ”¹] éŠé‡‘è¡“ç¨‹å¼(åŠ å…¥éŠé‡‘ç´€éŒ„)
ç™¼ä¿¡ç«™: å…‰åŸŸå°æ— (Wed Nov 27 15:36:18 2002)               Updated: 2005/11/29

å°å¼Ÿæ‰€ç®¡çš„BBSç«™å‰›ç”±MagicBBSç³»çµ±è½‰ç‚ºMaple-itocç‰ˆ
æˆ‘è©¦è‘—æŠŠæŸäº›åŸMagicä¸Šçš„ä¸€äº›éŠæˆ²ç§»æ¤åˆ°Maple-itocä¸Š

é©åˆ é‡‘:éŠ€ = 1:1000000 çš„é‡‘èåˆ¶åº¦

: global.h

#ifdef HAVE_BUY
#define FN_RUN_BANK_LOG "run/bank.log"  /* åŒ¯éŒ¢è¨˜éŒ„ */
#endif

+ #ifdef HAVE_GAME
+ #define FN_RUN_MAKEGOLD_LOG "run/makegold.log" /* jd.021127: ç…‰é‡‘è¡“ç´€éŒ„ */
+ #endif

: account.c:main()

#ifdef HAVE_BUY
    /* itoc.020831: æŠŠ åŒ¯éŒ¢è¨˜éŒ„ æ”¾å…¥ [BN_SECURITY] */
    sprintf(title, "%såŒ¯éŒ¢è¨˜éŒ„", date);
    keeplog(FN_RUN_BANK_LOG, BN_SECURITY, title, 2);
#endif

+ #ifdef HAVE_GAME
+   /* jd.021127: æŠŠ éŠé‡‘è¨˜éŒ„ æ”¾å…¥ [BN_SECURITY] */
+   sprintf(title, "%séŠé‡‘è¨˜éŒ„", date);
+   keeplog(FN_RUN_MAKEGOLD_LOG, BN_SECURITY, title, 2);
+ #endif

: so/Makefile

SO =    ... [1;33malchemy.so[m

: so/alchemy.c

/*-------------------------------------------------------*/
/* alchemy.c    ( NTHU CS MapleBBS Ver 3.10 )            */
/*-------------------------------------------------------*/
/* target : ç…‰é‡‘è¡“                                       */
/* create : 02/11/27                                     */
/* update :   /  /                                       */
/* author : jd.bbs@bbs.nhit.edu.tw                       */
/*-------------------------------------------------------*/

#include "bbs.h"

#ifdef HAVE_GAME

#define mouts(x,y,s)    { move(x, y); outs(s); }

int
main_alchemy()
{
  int make_gold, randnum;

  srand(time(NULL) + cuser.userno);

  while(1)
  {
    vs_bar("ç…‰é‡‘è¡“");

    mouts(2, 0, "åªéœ€èŠ±è²» 50000 éŠ€å¹£");
    mouts(3, 0, "å°±æœ‰æ©Ÿæœƒå¾—åˆ°é‡‘å¹£ï¼");
    move(4, 0);
    prints("\033[1;30mæ‚¨ç›®å‰æœ‰ %d éŠ€ %d é‡‘ \033[m", cuser.money, cuser.gold);

    if (vans("è¦æ‰£æ‰ 50000 éŠ€å¹£ä¾†ç…‰é‡‘å—(Y/N)ï¼Ÿ[N] ") != 'y')
      break;

    if (cuser.money < 50000)
      break;
    cuser.money -= 50000;

    mouts(6, 15, "å˜¿å˜¿ï½éŒ¢ä¸å¤ªå¤ äº†ï¼Œä¾†è®Šä¸€é»éŒ¢å§ï½");
    mouts(7, 15, "çµ±å¾¡å››æ–¹çš„é‡‘è‰²ä¹‹é¾å•Šï½");
    mouts(8, 15, "éµå¾æ‚¨çš„å…‰è¼ï¼Œè«‹å€Ÿæˆ‘åŠ›é‡ï½");
    sleep(1);

    make_gold = 0;
    randnum = rnd(120);
    if (randnum < 3)
    {
      make_gold = 1 + randnum;
      cuser.gold += make_gold;
      mouts(9, 15, "çµ¦æˆ‘æ›´å¤šçš„é‡‘å¹£ï¼„å§ï½");
      move(11,15);
      prints("è€¶ï½é‹æ°£çœŸä¸éŒ¯ï½ç…‰å¾—äº† %d é‡‘ï½", make_gold);
    }
    else if (randnum < 20)
    {
      mouts(9, 15, "ï¼ºZï½šzï½");
      mouts(11, 15, "å’¦ï½æ€éº¼å’’èªå¿µåˆ°ä¸€åŠï½ç¡è‘—äº†å•¦ï½ï½å—šå—šï½");
    }
    else if (randnum < 40)
    {
      mouts(9, 15, "æˆ‘è¦â€¦æˆ‘è¦â€¦æˆ‘è¦é‡‘å¹£å•¦â€¦");
      mouts(11, 15, "å’¦ï¼Ÿé‡‘å¹£å‘¢ï¼Ÿ");
    }
    else if (randnum < 60)
    {
      mouts(9, 15, "<\033[1;33mé‡‘è‰²ä¹‹é¾\033[m>ä½ æ‰¾æˆ‘å—ï¼Ÿ");
      mouts(11,15, "<\033[1;33mé‡‘è‰²ä¹‹é¾\033[m>æ²’ç©ºï¼Œä¸è¦åµï¼");
    }
    else
    {
      mouts(9, 15, "å“ˆå“ˆï½å¿«çµ¦æˆ‘éŒ¢å§ï½");
      mouts(10, 15, "ï¼ˆç­‰å¾…ï½ï¼‰");
      mouts(11, 15, "ï¼ˆç­‰å¾…ï½ï¼‰");
      mouts(12, 15, "å’¦ï½æ€éº¼ç”šéº¼ä¹Ÿæ²’ç™¼ç”Ÿ...:Q");
    }

    /* jd.021127: åŠ å…¥ç…‰é‡‘è¨˜éŒ„ï¼Œä»¥é˜²å¤§é‡æš´åŠ›ç…‰é‡‘ */
    if (make_gold)      /* ç…‰é‡‘æˆåŠŸæ‰è¨˜éŒ„ */
    {
      char buf[80];
      sprintf(buf, "%-13sç…‰å¾— %d é‡‘ (%s)\n", cuser.userid, make_gold, Now());
      f_cat(FN_RUN_MAKEGOLD_LOG, buf);
    }

    vmsg("ç…‰é‡‘å¥½ç´¯å–”");
  }

  return 0;
}
#endif  /* HAVE_GAME */

: menu.c

+ "bin/alchemy.so:main_alchemy", 0, - M_GAME,
+ "Alchemy    â™‚ ç…‰é‡‘å¤§æ³• â™€",

--
[1;32mâ–¡ Origin: [33må…‰åŸŸå°æ— - bbs.eo.nhit.edu.tw
[31mâ–¡ From: [36msw107-199.adsl.seed.net.tw[m
