ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [è«‹ç›Š] æœ‰æ²’æœ‰é‚£ç¨®"å¥½å‹ç‰ˆåŠ å…¥é‚€è«‹å‡½"
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/11/22 Mon 02:18:49)                Updated: 2004/11/24

â€» å¼•è¿°ã€Švividcat46.bbs@bbs.wretch.cc (ç¥•å¯†å¾·Ë™å‡±ç‰¹)ã€‹ä¹‹éŠ˜è¨€ï¼š
> å› ç‚ºç«™å…§æœ‰å¾ˆå¤šçš„å¥½å‹ç‰ˆè·Ÿå€‹äººç‰ˆ
> è¢«å°æ–¹åŠ å…¥çš„äººéƒ½ä¸çŸ¥é“
> å¦‚æžœé‚£å€‹ç‰ˆçš„ç‰ˆä¸»ä¸»å‹•åŠ å…¥å°æ–¹ç‚ºæ¿å‹
> [1;37mç„¶å¾Œå¯ä»¥æŒ‰å€‹éµå°±å¯„ä¸€å°ä¿¡çµ¦å°æ–¹é‚€è«‹ä»–åŠ å…¥[m

: pal.c:pal_add()

    pal_edit(&pal, DOECHO);
    strcpy(pal.userid, acct.userid);
    pal.userno = userno;
    rec_add(xo->dir, &pal, sizeof(PAL));

    utmp_admset(userno, STATUS_PALDIRTY);

+   if (xo->dir[0] == 'b' &&                    /* æ¿å‹æ‰éœ€è¦å¯„ä¿¡ */
+     vans("æ˜¯å¦ç™¼å‡½é€šçŸ¥ä»–(Y/N)ï¼Ÿ[N] ") == 'y')
+   {
+     char fpath[64], *title;
+     FILE *fp;
+
+     sprintf(fpath, "tmp/pal_add.%s", cuser.userid);   /* æš«å­˜æª” */
+     if (fp = fopen(fpath, "w"))
+     {
+       title = "åŠ å…¥æ¿å‹é€šçŸ¥";
+
+       /* æ–‡ç« æª”é ­ */
+       fprintf(fp, "%s %s (%s)\n",
+         str_author1, cuser.userid, cuser.username);
+       fprintf(fp, "æ¨™é¡Œ: %s\næ™‚é–“: %s\n\n", title, Now());
+
+       /* æ–‡ç« å…§å®¹ */
+       fprintf(fp, "%s å°‡æ‚¨åŠ å…¥ [%s] çš„æ¿å‹\n\n", cuser.userid, currboard);
+       fclose(fp);
+
+       mail_him(fpath, acct.userid, title, 0);
+       unlink(fpath);
+     }
+   }

    xo->pos = XO_TAIL;          /* æ”¾åœ¨æœ€å¾Œ */
    return pal_init(xo);


--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ž [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
