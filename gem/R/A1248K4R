ç™¼ä¿¡äºº: qazq.bbs@bbs.cs.nchu.edu.tw (ï¼Šæˆ‘è¦ç´…é€åŠé‚Šå¤©ï¼Š) çœ‹æ¿: plan
æ¨™  é¡Œ: [åŠŸèƒ½] è·³åˆ°æ–‡ç« ä¾†æºçœ‹æ¿ã€‚
ç™¼ä¿¡ç«™: ä¸­èˆˆè³‡ç§‘ (2004/11/19 Fri 17:14:30)                Updated: 2004/11/19

    All_Post æ˜¯å­˜æ”¾ç«™å…§å…¨éƒ¨çœ‹æ¿çš„æ–‡ç« ã€‚

    å¾€å¾€æœ‰äººåœ¨ All_Post æ¿çœ‹åˆ°æ–‡ç« ï¼Œæƒ³è¦åˆ°åŸæœ¬çš„æ¿çœ‹å…¶ä»–çš„æˆ–æ˜¯æ¨æ–‡...

    é‚„è¦å¾ˆéº»ç…©çš„æ‰¾åˆ°é‚£å€‹æ¿ç„¶å¾Œé€²å…¥....^^|||

    æ‰€ä»¥å°±å¯«äº†é€™å€‹åŠŸèƒ½ï¼Œå¸Œæœ›å¤§å®¶å¹«å¿™çœ‹çœ‹æœ‰ä»€éº¼ bug ....^^a

    æˆ–æ˜¯å“ªè£¡å¯ä»¥ä¿®æ”¹ã€æœ€ä½³åŒ–çš„....è¬è¬å¤§å®¶å›‰ï¼^^

==============================================================================

: src/post.c:post_jump()    æ–°å¢æ•´æ”¯å‡½å¼åœ¨ post_browse() ä¸Šé¢

static int
post_jump(xo)       /* qazq.041119: è·³åˆ°æ–‡ç« ä¾†æºçœ‹æ¿ */
  XO *xo;
{
  int tmpbno, bno;
  char *brdname, fpath[64], *ptr, buf[ANSILINELEN];
  HDR *hdr;
  FILE *fp;
  static int p_jump = 0;  /* é€²å…¥å¹¾å±¤ */

  /* æœ€å¤š jump ä¸€å±¤ */
  if (p_jump >= 1)
    return XO_NONE;

  hdr = (HDR *) xo_pool + (xo->pos - xo->top);

  hdr_fpath(fpath, xo->dir, hdr);

  if (fp = fopen(fpath, "r"))
  {
    ptr = fgets(buf, sizeof(buf), fp);
    fclose(fp);

    /* é–‹å§‹æŠ“å‡ºçœ‹æ¿åç¨± */
    if (ptr &&
      ((ptr = strstr(buf, str_post1)) || (ptr = strstr(buf, str_post2))) &&
      ptr[5] == ' ' && ptr[6])
    {
      brdname = ptr + 6;        /* å®šä½åˆ°çœ‹æ¿åç¨±çš„ä½ç½® */
      if (ptr = strchr(brdname, '\n'))
        *ptr = '\0';
      bno = brd_bno(brdname);
      if (bno >= 0 && bno != currbno)    /* çœ‹æ¿å­˜åœ¨ && è¦è·³åˆ°åˆ¥çš„çœ‹æ¿ */
      {
        tmpbno = currbno; /* ç´€éŒ„ä¸Šä¸€å€‹çœ‹æ¿ */

        if (!XoPost(bno))      /* å¯ä»¥é€²å…¥æ‰ xover() */
        {
          p_jump++;
          xover(XZ_POST);
#ifndef ENHANCED_VISIT
          time(&brd_visit[currbno]);
#endif
          p_jump--;

          XoPost(tmpbno);        /* è·³å›åŸä¾†çš„çœ‹æ¿ */
          return XZ_POST;
        }
      }
    }
  }
  return XO_NONE;
}

: post.c:post_cb[]

+ 'J', post_jump,     /* qazq.041119: çœ‹æ¿è·³èº(ä¸»è¦çµ¦All_Postæ¿ç”¨) */

: post.c:post_browse()

+   case 'J':       /* qazq.041119: è·³æ–‡ç« åˆ°ä¾†æºçœ‹æ¿ */
+     post_jump(xo);
+     break;

    case 'h':
      xo_help("post");
      break;

--
 [1m[42mâ”Œ[41mâ”¼[m Au[1mth[30mor[m: [43m ä¸­èˆˆè³‡ç§‘Ë™ä¸­èˆˆè³‡ç§‘ ï½…è³‡ç¨ç§€ [33;47m csNCHU.twbbs.org [m
 [1m[44mâ””[43mâ”˜[m O[1mri[30mgi[mn: [1;36mqazq [30må¾ [35m218-163-149-207.dynamic.hinet.net [30mç™¼è¡¨[m
