ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: brdmail ä¼¼ä¹Žæ²’å•¥é™åˆ¶
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/06/28 Mon 22:39:50)                Updated: 2004/06/28

â€» å¼•è¿°ã€ŠTroyLee.bbs@bbs.cse.ttu.edu.tw (What is life and dream?)ã€‹ä¹‹éŠ˜è¨€ï¼š
> æˆ‘å¯ä»¥é€éŽbrdmailè²¼æ–‡ç« åˆ°ä»»ä½•ç‰ˆè€¶....
> ä¸€èˆ¬çœ‹æ¿ å¥½å‹ç‰ˆ ç¥•å¯†ç‰ˆ åŒ¿åç‰ˆ ç‰¹æ®Šæ¬Šé™ç‰ˆ(ç«™é•·è¨Žè«–ç”¨)
> éƒ½å¯ä»¥.......

  æ˜¯æ²’éŒ¯ï¼Œå¦‚æžœä½ ä¸å–œæ­¡é€™æ¨£çš„è©±

: bmtad.c:getbrdname()

static int                      /* 1: æ‰¾åˆ°äº†é€™å€‹æ¿ï¼Œä¸”æ¿ååœ¨ brdname */
getbrdname(brdname)
  char *brdname;
{
  BRD *brd;

- if (brd = brd_get(brdname))
+ if ((brd = brd_get(brdname)) &&
+   ((brd->readlevel | brd->postlevel) < (PERM_VALID << 1)))
  {
    strcpy(brdname, brd->brdname);      /* æ›æˆæ­£ç¢ºçš„å¤§å°å¯« */
    return 1;
  }
  return 0;
}

: brdmail.c:brd_get()

static BRD *
brd_get(bname)
  char *bname;
{
  BRD *bhdr, *tail;

  bhdr = bshm->bcache;
  tail = bhdr + bshm->number;
  do
  {
    if (!str_cmp(bname, bhdr->brdname))
+   {
+     if ((bhdr->readlevel | bhdr->postlevel) < (PERM_VALID << 1))
        return bhdr;
+     return NULL;
+   }
  } while (++bhdr < tail);
  return NULL;
}


--
 [1;41mâ•­[44mâ”¼[m Or[1mig[30min[m: [43m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [35;47m processor.tfcis.org [m
 [1;42mâ”¼[45mâ”˜[m A[1mut[30mho[mr: [1;31mitoc [30må¾ž [36mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
