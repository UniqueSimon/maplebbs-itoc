ç™¼ä¿¡äºº: amaki.bbs@luna.twbbs.org (å·§å…‹åŠ›ç¾Š) çœ‹æ¿: plan
æ¨™  é¡Œ: [åŠŸèƒ½]çœ‹æ¿åˆ—è¡¨/åˆ†é¡žåˆ—è¡¨å³æ™‚ä¾çœ‹æ¿äººæ°£æŽ’åº
ç™¼ä¿¡ç«™: æœˆä¸‹å¤œæƒ³ (2003/12/31 Wed 12:45:13)                Updated: 2006/02/23

â€» å¼•è¿°ã€ŠEfen.bbs@backwind.g1.dorm.ncku.edu.tw (,,,,,,)ã€‹ä¹‹éŠ˜è¨€ï¼š
> pttçš„å³æ™‚ç†±é–€çœ‹ç‰ˆæœ‰è¾¦æ³•å¼„å—Žï¼Ÿ

  è¦æ”¹é€™å€‹ä½ è¦æœ‰åšçœ‹æ¿äººæ°£çš„ç¨‹å¼ã€‚

  ç„¶å¾Œå»ºä¸€å€‹åˆ†é¡žå« HOTï¼Œè£¡é¢éš¨ä¾¿æ”¾å…¥ä¸€å€‹çœ‹æ¿ (å› ç‚ºæ²’æœ‰çœ‹æ¿çš„åˆ†é¡žä¸æœƒå‡ºç¾)

: board.c:mantime_cmp() åœ¨class_load()å‰åŠ ä¸Šé€™æ”¯å‡½å¼

static int
mantime_cmp(a, b)
  short *a;
  short *b;
{
  /* ç”±å¤šæŽ’åˆ°å°‘ */
  return bshm->mantime[*b] - bshm->mantime[*a];
}

: board.c:class_load()

+ static int class_hot = 0;

static int
class_load(xo)
  XO *xo;
{
  short *cbase, *chead, *ctail;
  int chn;                    /* ClassHeader number */
+ int bnum = 0;

  ......
  ......

  do
  {
    chn = *chead++;
    if (chn >= 0)       /* ä¸€èˆ¬çœ‹æ¿ */
    {
      val = bits[chn];
      if (!(val & BRD_L_BIT) || (val & zap) || !(brd[chn].brdname[0]))
        continue;

      [1;44m// 10é€™å€‹è‡¨ç•Œå€¼è‡ªå®š [m
+     if (class_hot)
+     {
+       if (bshm->mantime[chn] < 10) /* åªåˆ—å‡ºäººæ°£è¶…éŽ 10 çš„çœ‹æ¿ */
+         continue;
+       bnum++;
+     }
    }

    ......
    ......

    max++;
    *cbase++ = chn;
  } while (chead < ctail);

+ if (bnum > 0)
+   qsort(cbase - bnum, bnum, sizeof(short), mantime_cmp);

  xo->max = max;
  if (xo->pos >= max)
    xo->pos = xo->top = 0;

: board.c:class_browse()

  chp = (short *) xo->xyz + xo->pos;
  chn = *chp;
  if (chn < 0)          /* é€²å…¥åˆ†é¡ž */
  {
+   short *chx;
+   char *img, *str;

+   img = class_img;
+   chx = (short *) img + (CH_END - chn);
+   str = img + *chx;

    [1;44m// "HOT/" åç¨±å¯è‡ªå®šï¼Œè‹¥æ”¹åä¹Ÿè¦é †ä¾¿æ”¹å¾Œé¢çš„é•·åº¦ 4 [m
+   if (!strncmp(str, "HOT/", 4))
+   {
+     class_hot = 1;
+     chn = CH_END;
+   }

    if (!XoClass(chn))
      return XO_NONE;

+   if (class_hot)
+     class_hot = 0;      /* é›¢é–‹ HOT Class å†æ¸…é™¤ class_hot æ¨™è¨˜ */
  }

--
  [1;33mOrigin: luna.twbbs.org[m
