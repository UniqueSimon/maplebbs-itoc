ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: æœ‰é—œæ­¡è¿ç•«é¢
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/12/14 Tue 00:29:19)                Updated: 2005/05/23

â€» å¼•è¿°ã€Špigco (å“ˆ)ã€‹ä¹‹éŠ˜è¨€ï¼š
> è«‹å•æ­¡è¿ç•«é¢è¦æ€éº¼æ”¹æ‰èƒ½é”åˆ°
> æœƒå…ˆæ•¸æœ‰å¹¾å€‹æ­¡è¿ç•«é¢ã€‚
> æœ‰ä¸‰å€‹é‚£å°±å¾ä¸‰å€‹ä¸­éš¨æ©Ÿæ’­æ”¾ä¸€å€‹ã€‚
> é€™æ¨£å°æ–¼ç¤¾åœ˜æƒ³åˆ°å¹«æ´»å‹•æ‰“å»£å‘Šæ¯”è¼ƒæ–¹ä¾¿^^"...

  åœ¨ note æ¿ç²¾è¯å€å»ºä¸€å€‹ã€Œåˆ†é¡ã€ï¼Œæª”åæ˜¯ Welcomeï¼Œæ¨™é¡Œä»»æ„
  ç„¶å¾Œåœ¨é€™åˆ†é¡è£¡åŠ ã€Œæ–‡ç« ã€
  é€™äº›æ–‡ç« å°±æœƒåœ¨ä¸Šç«™æ™‚è¢«éš¨æ©Ÿæ’­æ”¾

: bbsd.c:tn_welcome() æ–°å¢æ­¤å‡½å¼åœ¨ tn_login() å‰é¢

static void
tn_welcome()
{
  char folder[64], fpath[64];
  int pos;
  HDR hdr;

  gem_fpath(folder, BN_NOTE, "@/@Welcome");
  if ((pos = rec_num(folder, sizeof(HDR))) > 0)
  {
    pos = ap_start % pos;
    if (!rec_get(folder, &hdr, sizeof(HDR), pos))
    {
      hdr_fpath(fpath, folder, &hdr);
      more(fpath, NULL);
    }
  }
}

: bbsd.c:tn_login()

  if (cuser.userlevel)          /* not guest */
  {
    /* ------------------------------------------------- */
    /* æ ¸å° user level ä¸¦å°‡ .ACCT å¯«å›                   */
    /* ------------------------------------------------- */

    cuser.lastlogin = ap_start;
    str_ncpy(cuser.lasthost, fromhost, sizeof(cuser.lasthost));

    login_level();
+ }
+
+ tn_welcome();
+
+ if (cuser.userlevel)          /* not guest */
+ {
    /* ------------------------------------------------- */
    /* è¨­å®š status                                       */
    /* ------------------------------------------------- */

    login_status(multi);

--
 [1;43mâ—¤[46mâ—¥[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [36;47m cpu.tfcis.org [m
 [1;44mâ—£[41mâ—¢[m A[1mut[30mho[mr: [1;33mitoc [30må¾ [31mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
