ç™¼ä¿¡äºº: sby.bbs@bbs.csie.mcu.edu.tw (ä¸çŸ¥ä¸è¦ºå°±å¤©äº®äº†), çœ‹æ¿: installbbs
æ¨™  é¡Œ: [æ–‡ä»¶] IPv6 BBS -- è®“ IPv4 èˆ‡ IPv6 å…±å­˜ --
ç™¼ä¿¡ç«™: éŠ˜å‚³å¤§å­¸è³‡å·¥ç¥è©± (Fri May 30 01:11:17 2003)       Updated: 2003/05/30

[å‰è¨€]

    å°å¼Ÿä¸€æ™‚èˆˆèµ·æŠŠ BBS æ”¹æˆ IPv6 ç›¸å®¹, æ¸¬è©¦äº†å¹¾å¤©...å¤§è‡´ä¸Šæ‡‰è©²æ²’ä»€éº¼å•é¡Œ...

    ç”±æ–¼ä¹‹å‰å¥½åƒæ²’çœ‹éé¡ä¼¼çš„æ–‡ç« , å°±ä¾†ç»é†œä¸€ä¸‹, å¤§å®¶æœ‰èˆˆè¶£çš„è©±å¯ä»¥åƒè€ƒçœ‹çœ‹,

    å…§å®¹å¦‚æœ‰ç–‘å•æ­¡è¿ä¾†ä¿¡æŒ‡æ­£ :)


                                           Bor-Yeh Shen (sby@cs.mcu.edu.tw)


[é—œæ–¼ OS çš„æ”¯æ´]

    è¦è®“ BBS åŒæ™‚æä¾› IPv4 å’Œ IPv6, OS ä¸€å®šè¦æœ‰æ”¯æ´æ‰è¡Œ, å€¼å¾—é«˜èˆˆçš„æ˜¯,

    ç¾åœ¨è¨±å¤š OS éƒ½æœ‰æä¾› IPv4/IPv6 dual stack (Linux, BSD, Windows, ...)

    åªæ˜¯çœ‹æœ‰æ²’æœ‰ enable èµ·ä¾†, é—œæ–¼é€™æ–¹é¢çš„å…§å®¹ç¶²è·¯ä¸Šæœ‰è¨±å¤šæ–‡ä»¶å¯ä»¥åƒè€ƒ,

    å°±ä¸åœ¨æœ¬ç¯‡çš„è¨è«–ç¯„åœä¹‹å…§.


[socket ä½å€çµæ§‹çš„è½‰æ›]

    ç¬¬ä¸€æ­¥éœ€è¦å°‡æ‰€æœ‰ IPv4 socket address è½‰æ›æˆ IPv6,

    (ä¸å¿…æ“”å¿ƒ IPv4 Address æœƒæœ‰ä¸åˆçš„å•é¡Œ, å› ç‚º IPv6 åœ¨è¨­è¨ˆæ™‚å°±æœ‰è€ƒé‡åˆ°,

    ç³»çµ±æœƒè‡ªå·±å°‡ IPv4 Address mapped åˆ° IPv6 Address)

    ex:
        sockaddr_in æ”¹æˆ sockaddr_in6, xxx.sin_len æ”¹æˆ xxx.sin6_len, ...etc.

    ç•¶ç„¶, å¦‚æœæ‚¨çš„ BBS æœ‰åœ¨åš release çš„è©±, ç‚ºäº†é¿å…ä½¿ç”¨çš„ç³»çµ±ä¸æ”¯æ´ IPv6,

    #ifdef ... #else ... #endif æ‡‰è©²æ˜¯å…ä¸äº†çš„ :)


    ä»¥ä¸‹æ˜¯ IPv4 å’Œ IPv6 socket address çš„çµæ§‹, å°æ‡‰è‘—è½‰æ›å°±å¥½:

/* IPv4 socket address structure */

struct sockaddr_in {
        u_char  sin_len;                /* length of this struct */
        u_char  sin_family;             /* AF_INET */
        u_short sin_port;               /* Transport layer port # */
        struct  in_addr sin_addr;       /* IP4 address */
        char    sin_zero[8];            /* unused */
};


/* IPv6 socket address structure */

struct sockaddr_in6 {
        u_int8_t        sin6_len;       /* length of this struct */
        u_int8_t        sin6_family;    /* AF_INET6 */
        u_int16_t       sin6_port;      /* Transport layer port # */
        u_int32_t       sin6_flowinfo;  /* IP6 flow information */
        struct in6_addr sin6_addr;      /* IP6 address */
        u_int32_t       sin6_scope_id;  /* scope zone index */
};


[Address Family çš„è®Šæ›´]

    ç”± AF_INET æ”¹æˆ AF_INET6


[Protocal Family çš„è®Šæ›´]

    ç”± PF_INET æ”¹æˆ PF_INET6


[IP æ­£åè§£éƒ¨åˆ†]

    åœ¨åš IPv6 çš„è½‰æ›æ™‚, é€šå¸¸æœƒå»ºè­°ç”¨ getaddrinfo(), getnameinfo() å–ä»£

    åŸæœ‰çš„ gethostbyname(), gethostbyaddr() ç­‰å‘¼å«, é€™å…©å€‹å‡½å¼æœƒæŠŠ

    æ‰€æœ‰èˆ‡ IPv4 & IPv6 å”å®šç›¸é—œçš„å‹•ä½œéš±è—èµ·ä¾†, å¦‚æ­¤ä¸€ä¾†æˆ‘å€‘ä¸éœ€è¦åœ¨ä¹

    ç¾åœ¨ä½¿ç”¨çš„åˆ°åº•æ˜¯ IPv4 or IPv6, ç¨‹å¼ä¹Ÿæœƒè®Šå¾—è¼ƒç°¡æ½”ä¸€äº›,

    è©³ç´°çš„ç”¨æ³•å¯ä»¥åƒè€ƒ man page, è£¡é¢å¯«çš„è »æ¸…æ¥šçš„ :)

    (è·Ÿå‰é¢æ¯”èµ·ä¾†, é€™é‚Šç®—æ˜¯æ›´å‹•æ¯”è¼ƒå¤§çš„éƒ¨åˆ†)


[å…¶å®ƒ]

å› ç‚º IPv6 å­—ä¸²é•·åº¦æœ€é•·æ˜¯ INET6_ADDRSTRLEN (46),

æ‰€ä»¥ BBS ç´€éŒ„ä¸Šç«™ä¾†æºçš„åœ°æ–¹å¯èƒ½éœ€è¦è¦æ”¹ä¸€ä¸‹

(å¦‚æœä¸å¤ é•·çš„è©±ä¹Ÿè¨±è¦æ›´å‹•åŸæœ‰çš„çµæ§‹)

å…¶å®ƒæ‡‰è©²å°±æ²’ä»€éº¼éœ€è¦æ”¹çš„åœ°æ–¹äº†....(è‡³å°‘æˆ‘ç¾åœ¨çš„æ„Ÿè¦ºæ˜¯å¦‚æ­¤:p)

hmm....å¤§è‡´ä¸Šæ˜¯é€™æ¨£....é‚„æœ‰å•é¡Œçš„åœ°æ–¹å¯ä»¥å†ä¸€èµ·ä¾†è¨è«–çœ‹çœ‹ :)


--
å¦å¤–, ç¥è©±ç›®å‰çš„ IPv6 Address æ˜¯ 3ffe:3600:1e::2bf

ä¹Ÿæ­¡è¿å¤§å®¶ä¾†åƒè§€åƒè§€....^^

--
[1;36mâ€» Origin: [33méŠ˜å‚³è³‡å·¥ç¥è©±ç«™ [37m<bbs.csie.mcu.edu.tw>
[1;36mâ€» From  : [32m3ffe:3600:1e::2af[m
