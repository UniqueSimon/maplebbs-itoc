ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: è«‹å• é€²ç«™ç•«é¢é¡¯ç¤ºç³»çµ±å·²é–‹æ©Ÿæ™‚é–“
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/10/10 Sun 09:34:58)                Updated: 2004/10/10

â€» å¼•è¿°ã€Šchue.bbs@wretch.twbbs.org (é‰›ç­†)ã€‹ä¹‹éŠ˜è¨€ï¼š
> è«‹å• é€²ç«™ç•«é¢é¡¯ç¤ºç³»çµ±å·²é–‹æ©Ÿæ™‚é–“å¦‚ä½•å¯«...ç²¾è¯å€æ‰¾ä¸åˆ°

  é–‹é ­ç•«é¢ç§€å‡ºç¬¬ä¸€ä½ä½¿ç”¨è€…ä¸Šç«™è‡³ä»Šçš„æ™‚é–“

  æ”¹ struct UCACHE è¦é‡é–‹ bbs

: struct.h:UCACHE

  double sysload[3];
  int avgload;
+ time_t bbs_start;     /* ç¬¬ä¸€å€‹ä½¿ç”¨è€…ä¸Šç«™æ™‚é–“ */

: cache.c:ushm_init()

  ushm = shm_new(UTMPSHM_KEY, sizeof(UCACHE));
+ if (!(ushm->bbs_start))
+   time(&(ushm->bbs_start));

: bbsd.c:tn_main()

static inline void
tn_main()
{
+ time_t diff;
  clear();

- prints(MYHOSTNAME " âŠ™ " SCHOOLNAME " âŠ™ " MYIPADDR "\n"
-   "æ­¡è¿Žå…‰è‡¨ã€\033[1;33;46m %s \033[mã€‘ç›®å‰ç·šä¸Šäººæ•¸ [%d] äºº",
-   str_site, ushm->count);
+ diff = (time(0) - ushm->bbs_start) / 3600;
+ prints(MYHOSTNAME " âŠ™ " SCHOOLNAME " âŠ™ " MYIPADDR "\n"
+   "æ­¡è¿Žå…‰è‡¨ã€\033[1;33;46m %s \033[mã€‘ç›®å‰ç·šä¸Šäººæ•¸ [%d] äººï¼Œ"
+   "å·²é–‹æ©Ÿ %d å¤© %d æ™‚",
+   str_site, ushm->count, diff / 24, diff % 24);

--
 [1;41mâ•­[44mâ”¼[m Or[1mig[30min[m: [43m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [35;47m processor.tfcis.org [m
 [1;42mâ”¼[45mâ”˜[m A[1mut[30mho[mr: [1;31mitoc [30må¾ž [36mitoc.Dorm11.NCTU.edu.tw [30mç™¼è¡¨[m
