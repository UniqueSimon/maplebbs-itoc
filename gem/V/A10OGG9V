ç™¼ä¿¡äºº: itoc.bbs@processor.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: åˆªæ–‡å•é¡Œ..
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2004/03/06 Sat 23:22:52)                Updated: 2004/10/01

â€» å¼•è¿°ã€Šcentric (centric)ã€‹ä¹‹éŠ˜è¨€ï¼š
> å¥½å‹/ç§˜å¯†ç‰ˆ..
> è‡ªå·±ï½„æŽ‰çš„æ–‡ç« æœƒè·‘åˆ°junkç‰ˆåŽ»..
> è«‹å•è¦ä¿®æ”¹å“ª è®“ä»–ä¸æœƒåœ¨è·‘åŽ»junkå‘¢??

: post.c:move_post()

  hdr_fpath(fpath, folder, hdr);

+ if ((bshm->bcache + currbno)->readlevel != PERM_SYSOP &&
+   (bshm->bcache + currbno)->readlevel != PERM_BOARD)
+ {
    brd_fpath(fnew, board, fn_dir);
    hdr_stamp(fnew, HDR_LINK | 'A', &post, fpath);

    /* ç›´æŽ¥è¤‡è£½ trailing data */

    memcpy(post.owner, hdr->owner, TTLEN + 140);

    if (by_bm)
      sprintf(post.title, "%-13s%.59s", cuser.userid, hdr->title);
    else if (!stat(fpath, &st))
      by_bm = st.st_size;

    rec_add(fnew, &post, sizeof(HDR));
    btime_update(brd_bno(board));
+ }
+ else
+ {
+   if (!stat(fpath, &st))
+     by_bm = st.st_size;
+ }

  unlink(fpath);
  btime_update(currbno);
  cancel_post(hdr);

--
 [1;43mâ•­[46mâ”¼[m Or[1mig[30min[m: [41m Maple-itocË™å‹•åŠ›æ ¸å¿ƒ [32;47m processor.tfcis.org [m
 [1;45mâ•°[42mâ•®[m [1mMo[30mdi[mfy: [1;36m2004/03/06 Sat 23:22:52[m
