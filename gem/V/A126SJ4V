ç™¼ä¿¡äºº: itoc.bbs@cpu.tfcis.org (æ ¸å¿ƒå‹•åŠ›) çœ‹æ¿: plan
æ¨™  é¡Œ: æ–°æ–‡ç« é€šçŸ¥
ç™¼ä¿¡ç«™: å‹•åŠ›æ ¸å¿ƒ (2006/05/20 Sat 06:58:29)                Updated: 2006/05/23

â€» å¼•è¿°ã€Šguessi.bbs@bbs.wretch.ccã€‹ä¹‹éŠ˜è¨€ï¼š
> ç«™ä¸Šä½¿ç”¨è€…æå‡ºä¸€å€‹è¦æ±‚ [æ–°æ–‡ç« é€šçŸ¥]
> ------------------------------
> è‹¥ä»Šæ—¥ï¼¡è¨­å®šæŠ“å–ï¼¢æ‰€å¼µè²¼çš„æ–‡ç« 
> å‰‡ï¼¢è²¼æ–‡æ™‚å°‡æ–‡ç« copyè‡³ï¼¡çš„ä¿¡ç®±
> ------------------------------

  ï¼¡å¦‚æœè¦çœ‹ï¼¢æ‰€å¼µè²¼çš„æ–‡ç« 
  é‚£å°±è¦ï¼¢å°‡ï¼¡è¨­é€²ä»–çš„æ–°æ–‡ç« é€šçŸ¥åå–®

  è‡³æ–¼ï¼¢è¦æ€éº¼çŸ¥é“ï¼¡æƒ³çœ‹ä»–çš„æ–‡ç« 
  å°±å«ï¼¡ç›´æ¥å¯«ä¿¡å»çµ¦ï¼¢å°±å¾—äº†

: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  è¨­å®šåå–®çš„éƒ¨åˆ†

  ç›´æ¥æ‹¿ç‰¹åˆ¥åå–®ï¼–ç•¶å¯æŠ“æ–‡åå–®

: pal.c:pal_list()

-   switch (ch = vget(1, 0, "... (1~5)ç‰¹åˆ¥åå–® (Q)å–æ¶ˆ ...))
+   switch (ch = vget(1, 0, "... (1~6)ç‰¹åˆ¥åå–® (Q)å–æ¶ˆ ...))

  ...
  ...

    case '1':
    case '2':
    case '3':
    case '4':
    case '5':
+   case '6':

: pal.c:pal_cite()

-   "(1-5)ç‰¹åˆ¥åå–®"
+   "(1-6)ç‰¹åˆ¥åå–®"

  ...
  ...

- else if (fd >= '1' && fd <= '5')
+ else if (fd >= '1' && fd <= '6')

: pal.c:t_list()

- for (n = 1; n <= 5; n++)
+ for (n = 1; n <= 6; n++)
  {
    move(n + MENU_XPOS - 1, MENU_YPOS - 1);
    prints("(\033[1;36m%d\033[m) ç¾¤çµ„åå–®.%d", n, n);
+   if (n == 6)
+     outs(" æ–°æ–‡ç« é€šçŸ¥åå–®");
  }

  ...
  ...

- if (n <= 0 || n > 5)
+ if (n <= 0 || n > 6)

: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  æˆ‘ç™¼è¡¨æ–‡ç« æ™‚ï¼Œé€šçŸ¥æ–°æ–‡ç« é€šçŸ¥å…è¨±åå–®ä¸Šé¢çš„äºº

: post.c:do_post()

  rec_bot(folder, &hdr, sizeof(HDR));
  btime_update(currbno);
+ list6_notice(&hdr);

: post.c:list6_notice() æ–°å¢æ­¤å‡½å¼åœ¨ do_post() ä¸Šé¢

static void
list6_notice(hdr)
  HDR *hdr;
{
  int fd;
  char fpath[64], flist[64];
  FILE *fp;
  PAL pal;
  BRD *brd;

  /* åŒ¿åæ–‡ã€éš±è—æ¿ ä¸é€šçŸ¥ */
  if (curredit & EDIT_ANONYMOUS)
    return;
  brd = bshm->bcache + currbno;
  if ((brd->readlevel == PERM_BOARD) || (brd->readlevel == PERM_SYSOP))
    return;

  sprintf(fpath, "tmp/list6_notice.%s", cuser.userid);
  if (fp = fopen(fpath, "w"))
  {
    fprintf(fp, "%s %s (%s)\n", str_author1, cuser.userid, cuser.username);
    fprintf(fp, "æ¨™é¡Œ: æ–°æ–‡ç« é€šçŸ¥\næ™‚é–“: %s\n\n", Now());

    /* æ–‡ç« å…§å®¹ */
    fprintf(fp, "æ‚¨å¥½ï¼Œæˆ‘åœ¨ [%s] æ¿ç™¼è¡¨äº†ä¸€ç¯‡æ–°æ–‡ç« \n", currboard);
    fprintf(fp, "æ–‡ç« æ¨™é¡Œæ˜¯ %s\n", hdr->title);
    fprintf(fp, "è¦å»çœ‹å–”ï¼\n");
    fclose(fp);

    /* çœ‹æ–°æ–‡ç« é€šçŸ¥åå–®æœ‰å“ªäº›äººï¼Œä¸€ä¸€å¯„ä¿¡é€šçŸ¥ */
    usr_fpath(flist, cuser.userid, FN_LIST".6");
    if ((fd = open(flist, O_RDONLY)) >= 0)
    {
      while (read(fd, &pal, sizeof(PAL)) == sizeof(PAL))
      {
        if (!(pal.ftype & PAL_BAD))
          mail_him(fpath, pal.userid, "æ–°æ–‡ç« é€šçŸ¥", 0);
      }
      close(fd);
    }

    unlink(fpath);
  }
}

--
[1;36m=[37m[[36mï¹[37m:[33m?[37mæ‘ƒ?[mâ—£?[1;33m?[37m:[36mï¹ [31mOrigin[37m ]|[[m  [31m?[1må¨[;31;40mO?[1mç—[;31;40m?[1mcpu.tfcis.org  [37m]|[?[33mæŸèªª[m?[1;36mï¹[37m:][36m=[m
[1;36m=[m[[1;36mï¹Š[37m:[33m?[30mæ‘ƒ?[mâ•±?[1;33m?[37m:[36mï¹Š [31mAuthor[m ]|[[1m itoc.Dorm11.NCTU.edu.tw  [m]|[?[1;33m?[30m?[37mæ’[30m?[36mï¹Š[37m:[m][1;36m=[m
