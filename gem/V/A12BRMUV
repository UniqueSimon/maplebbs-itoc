ç™¼ä¿¡äºº: gaod.bbs@bbs.hychen.org (é›²æ·¡é¢¨æ¸…) çœ‹æ¿: plan
æ¨™  é¡Œ: Re: [å•é¡Œ]é—œæ–¼chatroom
ç™¼ä¿¡ç«™: æ˜Ÿæƒ…å¤œèª (2006/07/18 Tue 01:35:35)                Updated: 2006/07/18

â€» å¼•è¿°ã€Šbillyjmj.bbs@bbs.wretch.cc (ç¶ èŒ¶åŠç³–)ã€‹ä¹‹éŠ˜è¨€ï¼š
> è«‹å•...
> 1. åœ¨è¢å¹•çš„è¡Œæ•¸æ»¿äº†ä¹‹å¾Œ, è‹¥å¸Œæœ›å¾Œé¢è¼¸å…¥çš„å­—æ˜¯ä¸€ç›´åœ¨æœ€ä¸‹é¢è¦æ€éº¼æ”¹å‘¢?

: src/so/chat.c:printchatline() æ”¹æˆé€™æ¨£

static void
printchatline(msg)
  char *msg;
{
  int line;
  extern screenline *cur_slp;

  line = chatline;
  move(line, 0);
  clrtoeol();
  outs(msg);
  outc('\n');

  if (frec)
    fprintf(frec, "%s\n", msg);

  if (fmail)
    fprintf(fmail, "%s\n", msg);

  if (++line == stop_line)
  {
    int i;
    screenline *last_slp;

    line--;
    move(i = 2, 0);
    last_slp = cur_slp;

    while (++i <= line)
    {
      move(i, 0);
      memcpy(last_slp, cur_slp, sizeof(screenline));
      last_slp->smod = 0;
      last_slp->emod = 255;
      last_slp->oldlen = 255;
      last_slp->mode = SL_MODIFIED;
      last_slp = cur_slp;
    }
  }

  move(line, 0);
  clrtoeol();
  outs("\033[0mâ†’");
  clrtoeol();
  chatline = line;
}

é€™æ˜¯æˆ‘é€™é‚Šçš„å¯«æ³•

--
[1;32mâ€» Origin: [33mæ˜Ÿæƒ…å¤œèª [37m<bbs.hychen.org> [m
[1;32mâ€» From  : [36m125-227-8-21.dynamic.hinet.net[m
